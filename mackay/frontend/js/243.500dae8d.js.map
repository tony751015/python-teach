{"version":3,"file":"js/243.500dae8d.js","mappings":"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","sources":["webpack://wound-chat/./src/common/progessLoading.vue","webpack://wound-chat/src/common/progessLoading.vue","webpack://wound-chat/./src/common/progessLoading.vue?3add","webpack://wound-chat/./src/common/progessLoading.vue?0a03","webpack://wound-chat/./src/views/WoundChat.vue","webpack://wound-chat/./src/components/ChatWindows.vue","webpack://wound-chat/./src/components/ChatMessage.vue","webpack://wound-chat/src/components/ChatMessage.vue","webpack://wound-chat/./src/components/ChatMessage.vue?2a83","webpack://wound-chat/./src/components/ChatMessage.vue?8f4c","webpack://wound-chat/./src/components/UploadImage.vue","webpack://wound-chat/src/components/UploadImage.vue","webpack://wound-chat/./src/components/UploadImage.vue?9b85","webpack://wound-chat/./src/components/UploadImage.vue?1dda","webpack://wound-chat/src/components/ChatWindows.vue","webpack://wound-chat/./src/components/ChatWindows.vue?f9ce","webpack://wound-chat/./src/components/ChatWindows.vue?e78e","webpack://wound-chat/../../../src/components/VBottomSheet/VBottomSheet.ts","webpack://wound-chat/../../../src/components/VTextarea/VTextarea.ts","webpack://wound-chat/../../../src/components/VToolbar/index.ts","webpack://wound-chat/./src/components/MsgLayout.vue","webpack://wound-chat/src/components/MsgLayout.vue","webpack://wound-chat/./src/components/MsgLayout.vue?bc11","webpack://wound-chat/./src/components/MsgLayout.vue?e20b","webpack://wound-chat/src/views/WoundChat.vue","webpack://wound-chat/./src/views/WoundChat.vue?fb03","webpack://wound-chat/./src/views/WoundChat.vue?3290"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-dialog',{attrs:{\"hide-overlay\":\"\",\"persistent\":\"\",\"width\":\"300\"},model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',{attrs:{\"color\":\"point-1\",\"elevation\":\"1\"}},[_c('v-card-text',{staticClass:\"loading-text\"},[_vm._v(\" \"+_vm._s(_vm.showText)+\" \"),_c('v-progress-linear',{staticClass:\"mb-0\",attrs:{\"indeterminate\":\"\",\"color\":\"main-green\"}})],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n<v-dialog\r\n  v-model=\"dialog\"\r\n  hide-overlay\r\n  persistent\r\n  width=\"300\"\r\n>\r\n  <v-card\r\n    color=\"point-1\"\r\n    elevation=\"1\"\r\n  >\r\n    <v-card-text class=\"loading-text\">\r\n      {{ showText }}\r\n      <v-progress-linear\r\n        indeterminate\r\n        color=\"main-green\"\r\n        class=\"mb-0\"\r\n      ></v-progress-linear>\r\n    </v-card-text>\r\n  </v-card>\r\n</v-dialog>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    props: {\r\n      showText: String,\r\n      active: Boolean,\r\n    },\r\n    \r\n\r\n    data() {\r\n      return {\r\n        dialog: this.active\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .v-dialog {\r\n    box-shadow: 1px 1px 5px #181717 !important;\r\n  }\r\n  .loading-text {\r\n    color:#2D9CA0 !important;\r\n  }\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./progessLoading.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./progessLoading.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./progessLoading.vue?vue&type=template&id=10136c39&scoped=true\"\nimport script from \"./progessLoading.vue?vue&type=script&lang=js\"\nexport * from \"./progessLoading.vue?vue&type=script&lang=js\"\nimport style0 from \"./progessLoading.vue?vue&type=style&index=0&id=10136c39&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"10136c39\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-app',[_c('v-app-bar',{attrs:{\"color\":\"main-green\",\"elevation\":\"0\",\"dense\":\"\"}},[_c('img',{staticClass:\"main-logo\",attrs:{\"src\":require(\"../assets/logo_dr.png\"),\"alt\":\"logo\"}}),(_vm.userProfile.super_user)?_c('v-btn',{staticClass:\"ml-6 white--text d-md-block d-none\",attrs:{\"text\":\"\"},on:{\"click\":function($event){return _vm.goChatList()}}},[_vm._v(\" My Patients \")]):_vm._e(),_c('v-spacer',[[_c('v-tabs',{attrs:{\"align-with-title\":\"\",\"background-color\":\"transparent\"}})]],2),_c('v-menu',{attrs:{\"offset-y\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-btn',_vm._g(_vm._b({staticClass:\"dropdown-btn\",attrs:{\"rounded\":\"\",\"color\":\"normal\",\"small\":_vm.getRwdType === \"mobile\" ? true : false},on:{\"click\":_vm.handleDropdownClick}},'v-btn',attrs,false),on),[_c('v-avatar',{attrs:{\"size\":_vm.getRwdType !== 'mobile' ? 30 : 20}},[_c('v-img',{attrs:{\"src\":_vm.thumb_avatar}})],1),_c('span',{staticClass:\"ml-2 d-none d-sm-block\"},[_vm._v(_vm._s(_vm.username))]),_c('v-icon',{attrs:{\"right\":\"\"}},[_vm._v(\"mdi-chevron-down\")])],1)]}}])},[_c('v-list',{attrs:{\"dense\":\"\"}},[_c('v-list-item',{staticClass:\"d-sm-none\"},[_c('v-list-item-title',{staticClass:\"user-name\"},[_vm._v(_vm._s(_vm.username))])],1),_c('v-divider',{staticClass:\"d-sm-none\"}),_c('v-list-item',{on:{\"click\":_vm.logout}},[_c('v-list-item-title',{staticClass:\"logoutBtn\"},[_vm._v(\"log out\")])],1)],1)],1)],1),_c('v-container',{staticClass:\"fill-height\",attrs:{\"fluid\":\"\"}},[_c('v-row',[_c('v-col',{staticClass:\"chat-section\",attrs:{\"cols\":12,\"md\":8}},[_c('v-toolbar',{staticClass:\"w-100 searchChatToolBar\",attrs:{\"flat\":\"\",\"dense\":\"\"}},[_c('v-text-field',{staticClass:\"searchChatBar\",attrs:{\"prepend-inner-icon\":\"mdi-magnify\",\"label\":\"Search for a chat\",\"dense\":\"\",\"outlined\":\"\",\"color\":\"main-green\",\"placeholder\":\"Search for a chat\",\"hide-details\":\"\"},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.performSearch.apply(null, arguments)},\"input\":_vm.onInput},model:{value:(_vm.searchChat),callback:function ($$v) {_vm.searchChat=$$v},expression:\"searchChat\"}}),(_vm.searchResults.length > 0 || _vm.noResults)?_c('v-list',{staticClass:\"search-results-list\"},[(_vm.searchResults.length > 0)?_vm._l((_vm.searchResults),function(result,index){return _c('v-list-item',{key:index,on:{\"click\":function($event){return _vm.scrollToMessage(result.index)}}},[_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(_vm._s(result.content))])],1)],1)}):[_c('v-list-item',[_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(\"No records found\")])],1)],1)]],2):_vm._e()],1),_c('chat-windows',{ref:\"chatWindows\",staticClass:\"chatWindows\"})],1),_c('wound-photos',{staticClass:\"photo-section\",class:{\n          'photo-section--mobile': _vm.$vuetify.breakpoint.smAndDown,\n          'photo-section--open': _vm.isPhotoSectionOpen && _vm.$vuetify.breakpoint.smAndDown\n        },attrs:{\"albums\":_vm.albums,\"current-album\":_vm.currentAlbum,\"selected-patient-id\":_vm.currentAlbum,\"selectedChatroom\":_vm.selectedChatroom},on:{\"update:currentAlbum\":function($event){_vm.currentAlbum=$event},\"update:current-album\":[function($event){_vm.currentAlbum=$event},_vm.updateCurrentAlbum]}})],1),_c('div',{staticClass:\"mobile-actions d-md-none\",class:{'mobile-actions--hidden': _vm.isMessageLayoutOpen}},[_c('div',{staticClass:\"mobile-actions-container pt-1 pb-2 px-1\"},[_c('v-btn',{staticClass:\"mobile-action-btn rounded-lg\",class:{'active': _vm.isPhotoSectionOpen},attrs:{\"elevation\":\"0\",\"text\":\"\"},on:{\"click\":_vm.togglePhotoSection}},[_c('div',{staticClass:\"d-flex flex-column align-center\"},[_c('v-icon',{staticClass:\"action-icon\"},[_vm._v(_vm._s(_vm.isPhotoSectionOpen ? 'mdi-arrow-left' : 'mdi-image'))]),_c('span',{staticClass:\"action-text\"},[_vm._v(_vm._s(_vm.isPhotoSectionOpen ? 'Back' : 'Photos'))])],1)]),_c('v-btn',{staticClass:\"mobile-action-btn py-1 rounded-lg\",attrs:{\"elevation\":\"0\",\"text\":\"\"},on:{\"click\":_vm.openUploadImage}},[_c('div',{staticClass:\"d-flex flex-column align-center\"},[_c('v-icon',{staticClass:\"action-icon\"},[_vm._v(\"mdi-paperclip\")]),_c('span',{staticClass:\"action-text\"},[_vm._v(\"Upload\")])],1)]),_c('v-btn',{staticClass:\"mobile-action-btn rounded-lg\",attrs:{\"elevation\":\"0\",\"text\":\"\"},on:{\"click\":_vm.openMessageLayout}},[_c('div',{staticClass:\"d-flex flex-column align-center\"},[_c('v-icon',{staticClass:\"action-icon\"},[_vm._v(\"mdi-message-text\")]),_c('span',{staticClass:\"action-text\"},[_vm._v(\"Message\")])],1)]),(_vm.userProfile.super_user)?_c('v-btn',{staticClass:\"mobile-action-btn rounded-lg\",attrs:{\"elevation\":\"0\",\"text\":\"\"},on:{\"click\":_vm.goChatList}},[_c('div',{staticClass:\"d-flex flex-column align-center\"},[_c('v-icon',{staticClass:\"action-icon\"},[_vm._v(\"mdi-account-multiple\")]),_c('span',{staticClass:\"action-text\"},[_vm._v(\"Patients\")])],1)]):_vm._e()],1)])],1),_c('msg-layout',{attrs:{\"visible\":_vm.isMessageLayoutOpen},on:{\"update:visible\":function($event){_vm.isMessageLayoutOpen=$event},\"send-message\":_vm.handleSendMessage,\"message-uploaded\":_vm.handleMessageUploaded}}),_c('UploadImage',{key:`imgupload-${_vm.uploadImgKey}`,attrs:{\"activeUpload\":_vm.uploadImage},on:{\"close\":_vm.closeUploadImage,\"update:visible\":_vm.updateVisible,\"message-uploaded\":_vm.handleMessageUploaded}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-container',{staticClass:\"chat-container\"},[_c('v-dialog',{attrs:{\"width\":\"200\"},model:{value:(_vm.detectError),callback:function ($$v) {_vm.detectError=$$v},expression:\"detectError\"}},[_c('v-alert',{attrs:{\"dense\":\"\",\"type\":\"error\"}},[_vm._v(\" Error \")])],1),_c('div',{staticClass:\"px-0 mr-n3\"},[_c('ProgressLoader',{key:_vm.activeKey,attrs:{\"showText\":`LOADING...`,\"active\":_vm.activeProgress}}),_c('div',{ref:\"chatWindow\",staticClass:\"chat-window pt-1 pb-4\"},[_c('infinite-loading',{attrs:{\"direction\":\"top\",\"identifier\":_vm.infiniteId},on:{\"infinite\":_vm.infiniteHandler}},[_c('div',{attrs:{\"slot\":\"no-more\"},slot:\"no-more\"},[_vm._v(\"No more comments\")]),_c('div',{attrs:{\"slot\":\"no-results\"},slot:\"no-results\"},[_vm._v(\"No more comments\")])]),_vm._l((_vm.messages),function(msg,index){return _c('chat-message',{key:index,attrs:{\"is_carer_user\":msg.is_carer_user,\"content_type\":msg.content_type,\"user_name\":msg.user_name,\"content\":msg.content,\"media_url\":msg.media_url,\"isFirstDate\":msg.isFirstDate},on:{\"image-click\":function($event){return _vm.openImagePopup(`${_vm.IMG_PATH}media/${msg.media_url}`)},\"image-click2\":function($event){return _vm.openImagePopup(msg.media_url)}}})})],2)],1),_c('div',[_c('div',{staticClass:\"send-message-layout d-none d-md-flex\"},[_c('v-text-field',{staticClass:\"message-input mb-13 mx-3\",attrs:{\"placeholder\":\"Type your message here\",\"outlined\":\"\",\"hint\":\"Shift + Enter for a new line, Enter to send: \",\"persistent-hint\":\"\"},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.sendMessage.apply(null, arguments)}},model:{value:(_vm.newMessage),callback:function ($$v) {_vm.newMessage=$$v},expression:\"newMessage\"}}),_c('div',{staticClass:\"action-buttons\"},[_c('button',{staticClass:\"send-btn px-1 mr-1\",attrs:{\"elevation\":\"0\",\"color\":\"white\"},on:{\"click\":_vm.sendMessage}},[_c('v-icon',{attrs:{\"color\":\"main-green\"}},[_vm._v(\"mdi-send\")])],1),_c('v-btn',{staticClass:\"upload-btn main-green\",class:{'upload-btn--mobile': _vm.$vuetify.breakpoint.xs},attrs:{\"elevation\":\"0\",\"color\":\"primary\"},on:{\"click\":_vm.openUploadImage}},[_c('v-icon',[_vm._v(\"mdi-paperclip\")]),_c('span',{staticClass:\"d-none d-sm-inline\"},[_vm._v(\"Upload\")])],1)],1)],1)]),_c('ImagePopup',{key:`imgpop-${_vm.popImgKey}`,attrs:{\"image\":_vm.selectedImage,\"visible\":_vm.imagePopupVisible},on:{\"close\":_vm.closeImagePopup}}),_c('UploadImage',{key:`imgupload-${_vm.uploadImgKey}`,attrs:{\"activeUpload\":_vm.uploadImage},on:{\"close\":_vm.closeUploadImage,\"update:visible\":_vm.updateVisible,\"message-uploaded\":_vm.handleMessageUploaded}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"date-divider text-center grey--text font-small\"},[_vm._v(_vm._s(_vm.isFirstDate))]),_c('v-row',{class:_vm.alignmentClass,staticStyle:{\"margin\":\"0\"}},[(_vm.content_type === 'text')?_c('v-col',{attrs:{\"cols\":\"auto\"}},[_c('v-card',{staticClass:\"mr-4\",class:[_vm.messageClass, 'mr-4'],attrs:{\"flat\":\"\"}},[_c('v-card-text',{staticClass:\"font-large font-weight-bold font-weight-bold\",domProps:{\"innerHTML\":_vm._s(_vm.contentRegexMatchURL)}})],1)],1):(_vm.content_type === 'image')?_c('v-col',{key:_vm.media_url,staticClass:\"img_col img_col\",attrs:{\"cols\":\"5\"}},[_c('v-card',{staticClass:\"mr-4\",class:[_vm.messageClass, 'mr-4'],attrs:{\"color\":\"point-1\",\"flat\":\"\"}},[_c('img',{attrs:{\"src\":`${_vm.IMG_PATH}media/${_vm.media_url}`},on:{\"click\":function($event){return _vm.$emit('image-click', `${_vm.IMG_PATH}media/${_vm.media_url}`)}}})])],1):(_vm.content_type === 'image2')?_c('v-col',{key:_vm.media_url,staticClass:\"img_col\",attrs:{\"cols\":\"5\"}},[_c('v-card',{staticClass:\"mr-4\",class:[_vm.messageClass, 'mr-4'],attrs:{\"color\":\"point-1\",\"flat\":\"\"}},[_c('img',{attrs:{\"src\":_vm.media_url},on:{\"click\":function($event){return _vm.$emit('image-click2', _vm.media_url)}}})])],1):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\r\n  div\r\n    .date-divider.text-center.grey--text.font-small {{ isFirstDate }}\r\n    v-row(:class=\"alignmentClass\" style=\"margin: 0;\")\r\n      v-col(cols=\"auto\" v-if=\"content_type === 'text'\")\r\n        v-card.mr-4(:class=\"[messageClass, 'mr-4']\" flat)\r\n          v-card-text.font-large.font-weight-bold(class=\"font-weight-bold\" v-html=\"contentRegexMatchURL\")\r\n\r\n      v-col.img_col(cols=\"5\" :key=\"media_url\" class=\"img_col\" v-else-if=\"content_type === 'image'\")\r\n        v-card.mr-4(color=\"point-1\" :class=\"[messageClass, 'mr-4']\" flat)\r\n          img(:src=\"`${IMG_PATH}media/${media_url}`\" @click=\"$emit('image-click', `${IMG_PATH}media/${media_url}`)\")\r\n\r\n      v-col(cols=\"5\" :key=\"media_url\" class=\"img_col\" v-else-if=\"content_type === 'image2'\")\r\n        v-card.mr-4(color=\"point-1\" :class=\"[messageClass, 'mr-4']\" flat)\r\n          img(:src=\"media_url\" @click=\"$emit('image-click2', media_url)\")\r\n\r\n  //- <div>\r\n  //-   <div class=\"date-divider text-center grey--text\">{{ isFirstDate }}</div>\r\n  //-   <v-row :class=\"alignmentClass\" style=\"margin: 0;\">\r\n  //-     <v-col cols=\"auto\" v-if=\"content_type === 'text'\">\r\n  //-       <v-card \r\n  //-         :class=\"[messageClass, 'mr-4']\"\r\n  //-         flat>\r\n  //-         <v-card-text\r\n  //-           class=\"font-weight-bold\" v-html=\"contentRegexMatchURL\"></v-card-text>\r\n  //-       </v-card>\r\n        \r\n  //-     </v-col>\r\n  //-     <v-col cols=\"5\" :key=\"media_url\" class=\"img_col\"  v-else-if=\"content_type === 'image'\">\r\n  //-       <v-card \r\n  //-         color=\"point-1\"\r\n  //-         :class=\"[messageClass, 'mr-4']\"\r\n  //-         flat>\r\n  //-           <img :src=\"`${IMG_PATH}media/${media_url}`\" @click=\"$emit('image-click', `${IMG_PATH}media/${media_url}`)\" />\r\n  //-       </v-card>\r\n  //-     </v-col>\r\n  //-     <v-col cols=\"5\" :key=\"media_url\" class=\"img_col\"  v-else-if=\"content_type === 'image2'\">\r\n  //-       <v-card \r\n  //-         color=\"point-1\"\r\n  //-         :class=\"[messageClass, 'mr-4']\"\r\n  //-         flat>\r\n  //-           <img :src=\"media_url\" @click=\"$emit('image-click2', media_url)\" />\r\n  //-       </v-card>\r\n  //-     </v-col>\r\n  //-   </v-row>  \r\n  //- </div>\r\n  \r\n</template>\r\n  \r\n<script>\r\n\r\nexport default {\r\n  name: 'ChatMessage',\r\n\r\n  props: {\r\n    is_carer_user: {\r\n      type: Boolean,\r\n      required: true\r\n    },\r\n    content_type: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    user_name: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    content: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    media_url: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    isFirstDate: {\r\n      type: String,\r\n      required: true\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    contentRegexMatchURL: function() {\r\n      let newContent = this.content;\r\n      // eslint-disable-next-line\r\n      /* eslint-disable-next-line */\r\n      const urlRegex = /https?:\\/\\/(?:www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b(?:[-a-zA-Z0-9()@:%_\\+.~#?&\\/=]*)/g;\r\n      const matchURL = newContent.match(urlRegex);\r\n      if (matchURL) {\r\n        newContent = newContent.replace(urlRegex, `<a style=\"margin: 0 5px;\" href=\"${matchURL[0]}\" target=\"_blank\">${matchURL[0]}</a>`);\r\n      }\r\n      return newContent;\r\n    },\r\n    alignmentClass() {\r\n      // alert(this.is_carer_user);\r\n      const isSuperUser = this.$root.userProfile?.super_user;\r\n      if (isSuperUser) {\r\n        return this.is_carer_user ? 'justify-end' : 'justify-start';\r\n        // return this.is_carer_user ? 'justify-start' : 'justify-end';\r\n      } else {\r\n        return this.is_carer_user ? 'justify-start' : 'justify-end';\r\n        // return this.is_carer_user ? 'justify-end' : 'justify-start';\r\n      }\r\n    },\r\n    messageClass() {\r\n      const isSuperUser = this.$root.userProfile?.super_user;\r\n      if (isSuperUser) {\r\n        return this.is_carer_user ? 'own-message' : 'other-message';\r\n        // return this.is_carer_user ? 'other-message' : 'own-message';\r\n      } else {\r\n        return this.is_carer_user ? 'other-message' : 'own-message';\r\n        // return this.is_carer_user ? 'own-message' : 'other-message';\r\n      }\r\n    }\r\n  },\r\n\r\n  watch: {\r\n\r\n  },\r\n\r\n}\r\n</script>\r\n\r\n<style scoped lang='scss'>\r\n.col-auto{\r\n  max-width: 75%;\r\n  padding: 0;\r\n}\r\n.justify-start{\r\n  .img_col{\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    padding-left: 0px;\r\n  }\r\n}\r\n.justify-end{\r\n  .img_col{\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    padding-right: 0px;\r\n  }\r\n}\r\n\r\n.img_col .v-card{\r\n  line-height: 0 !important;\r\n}\r\n.img_col img{\r\n  max-height: 450px;\r\n}\r\n.v-card__text {\r\n  padding: 10px 15px;\r\n  overflow-wrap: break-word;\r\n  word-wrap:break-word;\r\n  word-break:break-all;\r\n  line-height: 1.5;\r\n}\r\n\r\n.own-message {\r\n  background-color: #000 !important;\r\n  color: #fff;\r\n  border-radius: 16px 16px 0 16px;\r\n  margin: 5px 0;\r\n  /* margin-right: 15px; */\r\n}\r\n.own-message .v-card__text{\r\n  color: #FFF;\r\n}\r\n\r\n.other-message {\r\n  background-color: #f8f8f8;\r\n  border: 1px solid #ddd;\r\n  border-radius: 16px 16px 16px 0;\r\n  margin: 5px 0;\r\n}\r\n\r\n.date-divider {\r\n  color: #aaa;\r\n}\r\nimg {\r\n  max-width: 100%;\r\n  height: auto;\r\n  border-radius: 10px;\r\n  // margin-top: 10px;\r\n  cursor: pointer;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChatMessage.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChatMessage.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ChatMessage.vue?vue&type=template&id=1172d7bb&scoped=true&lang=pug\"\nimport script from \"./ChatMessage.vue?vue&type=script&lang=js\"\nexport * from \"./ChatMessage.vue?vue&type=script&lang=js\"\nimport style0 from \"./ChatMessage.vue?vue&type=style&index=0&id=1172d7bb&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1172d7bb\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-dialog',{attrs:{\"max-width\":\"500px\",\"scrollable\":\"\"},model:{value:(_vm.uploadImage),callback:function ($$v) {_vm.uploadImage=$$v},expression:\"uploadImage\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"font-large font-weight-bold text-center\"},[_vm._v(\" Upload a photo of the wound \"),_c('span',{staticClass:\"font-weight-regular font-small grey--text ml-1\"},[_vm._v(\"JPG and PNG image files only(Max: 8MB)\")])]),_c('v-card-text',[_c('v-container',{staticClass:\"uploader-area\",class:{ 'is-dragging': _vm.fileOnDrag }},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.filePreviewSrc),expression:\"filePreviewSrc\"}],staticClass:\"uploader-preview\"},[_c('v-btn',{staticClass:\"uploader-remove-btn\",on:{\"click\":_vm.handleResetInput}},[_c('v-icon',{attrs:{\"color\":\"primary\"}},[_vm._v(\"mdi-trash-can-outline\")])],1),_c('v-img',{attrs:{\"src\":_vm.filePreviewSrc,\"contain\":\"\"}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.filePreviewSrc),expression:\"!filePreviewSrc\"}]},[_c('input',{ref:\"fileInput\",staticClass:\"uploader-input\",attrs:{\"type\":\"file\",\"accept\":\"image/jpeg, image/png\"},on:{\"dragenter\":_vm.handleDragEnter,\"dragleave\":_vm.handleDragEnter,\"dragdrop\":_vm.handleDragDrop,\"change\":_vm.handleInputChange}}),_c('div',{staticClass:\"uploader-interface\"},[_c('v-icon',{attrs:{\"size\":\"40\",\"color\":\"#dcdcdc\"}},[_vm._v(\"mdi-cloud-upload-outline\")]),_c('p',{class:{ 'error-message': _vm.showErrorMsg }},[_vm._v(_vm._s(_vm.displayFileTips))])],1)])])],1),_c('v-card-actions',{staticClass:\"justify-end\"},[_c('v-btn',{attrs:{\"text\":\"\",\"color\":\"v-dark\"},on:{\"click\":_vm.handleClose}},[_vm._v(\"Cancel\")]),_c('v-btn',{attrs:{\"color\":\"primary\",\"text\":\"\",\"disabled\":!_vm.canUpload},on:{\"click\":_vm.startUpload}},[(_vm.showLoading)?_c('v-progress-circular',{attrs:{\"indeterminate\":\"\",\"color\":\"white\",\"size\":\"20\"}}):_c('span',[_vm._v(\"Submit upload\")])],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <v-dialog v-model=\"uploadImage\" max-width=\"500px\" scrollable>\r\n      <v-card>\r\n        <v-card-title class=\"font-large font-weight-bold text-center\">\r\n          Upload a photo of the wound\r\n          <span class=\"font-weight-regular font-small grey--text ml-1\">JPG and PNG image files only(Max: 8MB)</span>\r\n        </v-card-title>\r\n        \r\n        <v-card-text>\r\n            <v-container\r\n                class=\"uploader-area\"\r\n                :class=\"{ 'is-dragging': fileOnDrag }\"\r\n                >\r\n                <!-- @click=\"triggerFileInput\" -->\r\n                <!-- @click=\"triggerFileInput\" 點擊作用區 -->\r\n                <!-- 隱藏的 input -->\r\n                \r\n                <!-- 預覽圖顯示區 -->\r\n                <div v-show=\"filePreviewSrc\" class=\"uploader-preview\">\r\n                  <v-btn class=\"uploader-remove-btn\" @click='handleResetInput'>\r\n                    <v-icon color=\"primary\">mdi-trash-can-outline</v-icon>\r\n                  </v-btn>\r\n                  <v-img :src=\"filePreviewSrc\" contain></v-img>\r\n                </div>\r\n\r\n                <div v-show=\"!filePreviewSrc\">\r\n                  <input\r\n                    ref=\"fileInput\"\r\n                    type=\"file\"\r\n                    accept=\"image/jpeg, image/png\"\r\n                    class=\"uploader-input\"\r\n                    @dragenter='handleDragEnter'\r\n                    @dragleave='handleDragEnter'\r\n                    @dragdrop='handleDragDrop'\r\n                    @change='handleInputChange'/>\r\n                 \r\n                  <!-- 防呆訊息顯示區 -->\r\n                  <div class=\"uploader-interface\">\r\n                    <v-icon size=\"40\" color=\"#dcdcdc\">mdi-cloud-upload-outline</v-icon>\r\n                    <p :class=\"{ 'error-message': showErrorMsg }\">{{ displayFileTips }}</p>\r\n                    <!-- <p class=\"text-caption text-grey--text\">Only accept JPG and PNG image files，Max: 8MB</p> -->\r\n                  </div>\r\n                </div>\r\n            </v-container>\r\n        </v-card-text>\r\n  \r\n        <v-card-actions class=\"justify-end\">\r\n          <v-btn text color=\"v-dark\" @click=\"handleClose\">Cancel</v-btn>\r\n          <v-btn color=\"primary\" text :disabled=\"!canUpload\" @click=\"startUpload\">\r\n            <v-progress-circular\r\n              v-if=\"showLoading\"\r\n              indeterminate\r\n              color=\"white\"\r\n              size=\"20\"\r\n            ></v-progress-circular>\r\n            <span v-else>Submit upload</span>\r\n          </v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n  </template>\r\n  \r\n  <script>\r\n  import axios from \"axios\";\r\n\r\n  export default {\r\n    props: {\r\n      activeUpload: Boolean\r\n    },\r\n    data() {\r\n      return {\r\n        uploadImage: this.activeUpload,\r\n        file: null, // 上傳檔案物件\r\n        filePreviewSrc: \"\", // 圖片預覽 URL\r\n        fileOnDrag: false, // 是否處於拖曳狀態\r\n        fileTips: \"Drag and drop or click to upload images\", // 初始提示訊息\r\n        showErrorMsg: false, // 是否顯示錯誤訊息\r\n        canUpload: false, // 是否允許上傳\r\n        showLoading: false, // 傳送按鈕的載入狀態\r\n        \r\n      };\r\n    },\r\n    computed: {\r\n      displayFileTips() {\r\n        // 使用 $vuetify.breakpoint.smAndDown 來檢查是否為手機版\r\n        return this.$vuetify.breakpoint.smAndDown ? \"Click to upload images\" : this.fileTips;\r\n      }\r\n    },\r\n    methods: {\r\n        startUpload() {\r\n          const userId = this.userProfile.id;\r\n          let chatRoom;\r\n          const getJWTData = JSON.parse(localStorage.getItem('mackay'));\r\n          if (this.userProfile.super_user) {\r\n            if (getJWTData.room_path) {\r\n              chatRoom = getJWTData.room_path;\r\n            }else {\r\n              chatRoom = this.storeChatRoom;\r\n            }\r\n            \r\n          } else {\r\n            chatRoom = this.userProfile.room_path;\r\n          }\r\n          const isCarerUser = this.userProfile.super_user === true ? '1' : '0';\r\n          // const chatRoom = this.userProfile.chatRoom;\r\n          const formData = new FormData();\r\n          const ts = new Date().getTime();\r\n          console.log('this.file', this.file);\r\n\r\n          formData.append('user_id', userId);\r\n          formData.append('chatRoom', chatRoom); // 根據 super_user 設置\r\n          formData.append('is_carer_user', isCarerUser); // 根據 super_user 設置\r\n          formData.append('photo_upload', this.file, `${userId}_${ts}.${this.file.type.split('/')[1]}`);\r\n          axios.post(`${this.SERVER_PATH}api/chat/upload`, formData, {\r\n            headers: {\r\n              'Content-Type': 'multipart/form-data',\r\n            },\r\n          })\r\n          .then((response) => {\r\n            // alert('Message sent successfully');\r\n            console.log('Message sent successfully:', response.data);\r\n            this.uploadImage = false;\r\n            const user_name = this.userProfile.name || '您';\r\n            const messageData = {\r\n              is_carer_user: isCarerUser === '1',\r\n              user_name: user_name,\r\n              media_url: this.filePreviewSrc,\r\n              content_type: 'image2',\r\n              content: '',\r\n              isFirstDate: '',\r\n            };\r\n            this.$emit('message-uploaded', messageData);\r\n            this.$root.$emit('upload-success');\r\n            // 發送滾動到底部\r\n            this.$nextTick(() => {\r\n              const chatWindow = this.$parent.$refs.chatWindow;\r\n              if (chatWindow) {\r\n                chatWindow.scrollTop = chatWindow.scrollHeight;\r\n              }\r\n            });\r\n          })\r\n          .catch((err) => {\r\n            console.error('Error sending message:', err);\r\n          });\r\n        },\r\n\r\n        triggerFileInput() {\r\n            // 點擊觸發隱藏的文件選擇器\r\n            this.$refs.fileInput.click();\r\n        },\r\n        handleResetInput() {\r\n          console.log('handleResetInput', this.$refs.fileInput)\r\n          this.canUpload = false;\r\n          this.$refs.fileInput.value = '';\r\n          this.filePreviewSrc = '';\r\n          this.fileTips = this.$options.data().fileTips;\r\n        },\r\n        handleInputChange(event) {\r\n            const file = event.target.files[0];\r\n            if (file) {\r\n              this.handleUploadFile(file);\r\n            }\r\n        },\r\n        handleUploadFile(file) {\r\n            this.fileOnDrag = false;\r\n            this.showErrorMsg = false;\r\n\r\n            if (file.type === \"image/jpeg\" || file.type === \"image/png\") {\r\n              const _URL = window.URL || window.webkitURL;\r\n              const img = new Image();\r\n              img.src = _URL.createObjectURL(file);\r\n\r\n              img.onload = () => {\r\n                if (file.size < 8000 * 1024) {\r\n                  this.fileTips = file.name;\r\n                  this.canUpload = true;\r\n                  this.filePreviewSrc = img.src; // 設置圖片預覽\r\n                  this.file = file; // 設置上傳檔案物件\r\n                } else {\r\n                  this.showErrorMsg = true;\r\n                  this.fileTips = \"File size must be under 8MB\";\r\n                  this.file = null;\r\n                }\r\n              };\r\n            } else {\r\n              this.showErrorMsg = true;\r\n              this.fileTips = \"File format is not supported\";\r\n            }\r\n        },\r\n        handleDragEnter(event) {\r\n            event.preventDefault();\r\n            this.fileOnDrag = true;\r\n        },\r\n        handleDragLeave() {\r\n            this.fileOnDrag = false;\r\n        },\r\n        handleDragDrop(event) {\r\n            event.preventDefault();\r\n            this.fileOnDrag = false;\r\n            const files = event.dataTransfer.files;\r\n            if (files && files.length > 0) {\r\n            const file = files[0];\r\n            this.handleUploadFile(file);\r\n            }\r\n        },\r\n        handleChange(file) {\r\n            this.handleUploadFile(file);\r\n        },\r\n\r\n        handleClose() {\r\n            this.uploadImage = false;\r\n        },\r\n    },\r\n  };\r\n  </script>\r\n  \r\n\r\n  <style scoped>\r\n  .uploader-area {\r\n    position: relative;\r\n    border: 2px dashed #dcdcdc;\r\n    border-radius: 8px;\r\n    padding: 16px;\r\n    text-align: center;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    transition: border-color 0.2s ease;\r\n    min-height: 200px; /* 增加區域高度 */\r\n  }\r\n/* \r\n  .headline {\r\n    font-size: 13px;\r\n  } */\r\n\r\n  .uploader-input {\r\n    position: absolute;\r\n    top: 0;\r\n    text-indent: -9999px;\r\n    width: 100%;\r\n    height: 100%;\r\n    left: 0;\r\n  }\r\n  \r\n  .uploader-area.is-dragging {\r\n    border-color: #42a5f5;\r\n  }\r\n  \r\n  .uploader-preview {\r\n    display: flex;\r\n    justify-content: center;\r\n    width: 100%;\r\n  }\r\n\r\n  .v-btn.uploader-remove-btn {\r\n    position: absolute;\r\n    z-index: 30;\r\n    bottom: 10px;\r\n    right: 10px;\r\n    width: 40px;\r\n    height: 40px;\r\n    min-width: unset;\r\n    border-radius: 50%;\r\n    background-color: #fff;\r\n  }\r\n\r\n  .image-preview {\r\n    width: 400px; /* 固定寬度為 400px */\r\n    height: calc(400px * 0.75); /* 高度為寬度的 75% (4:3 比例) */\r\n    object-fit: contain; /* 確保圖片完整呈現 */\r\n    border-radius: 8px; /* 圓角效果（視需要調整） */\r\n    border: 1px solid #dcdcdc; /* 添加邊框讓預覽更清晰 */\r\n  }\r\n    \r\n  .uploader-interface {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  \r\n  .uploader-interface p {\r\n    margin: 4px 0;\r\n  }\r\n  \r\n  .error-message {\r\n    color: #f44336;\r\n  }\r\n  </style>\r\n  ","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UploadImage.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UploadImage.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./UploadImage.vue?vue&type=template&id=949aad98&scoped=true\"\nimport script from \"./UploadImage.vue?vue&type=script&lang=js\"\nexport * from \"./UploadImage.vue?vue&type=script&lang=js\"\nimport style0 from \"./UploadImage.vue?vue&type=style&index=0&id=949aad98&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"949aad98\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <v-container class=\"chat-container\">\r\n    <v-dialog v-model=\"detectError\" width=\"200\">\r\n      <v-alert dense type=\"error\"> Error </v-alert>\r\n    </v-dialog>\r\n\r\n    <div class=\"px-0 mr-n3\">\r\n      <ProgressLoader :key='activeKey' :showText=\"`LOADING...`\" :active=\"activeProgress\"></ProgressLoader>\r\n      \r\n      <div ref=\"chatWindow\" class=\"chat-window pt-1 pb-4\">\r\n        <infinite-loading direction=\"top\" @infinite=\"infiniteHandler\" :identifier='infiniteId'>\r\n          <div slot=\"no-more\">No more comments</div>\r\n          <div slot=\"no-results\">No more comments</div>\r\n        </infinite-loading>\r\n        \r\n        <!-- v-for=\"(msg, index) in messages.slice().reverse()\" -->\r\n        <chat-message\r\n          v-for=\"(msg, index) in messages\"\r\n          :key=\"index\"\r\n          :is_carer_user=\"msg.is_carer_user\"\r\n          :content_type=\"msg.content_type\"\r\n          :user_name=\"msg.user_name\"\r\n          :content=\"msg.content\"\r\n          :media_url=\"msg.media_url\"\r\n          :isFirstDate=\"msg.isFirstDate\"\r\n          @image-click=\"openImagePopup(`${IMG_PATH}media/${msg.media_url}`)\" \r\n          @image-click2=\"openImagePopup(msg.media_url)\"\r\n        ></chat-message>\r\n        <!-- image-click2解決測試時路徑用 -->\r\n      </div>\r\n    </div>\r\n    <div>\r\n      <div class=\"send-message-layout d-none d-md-flex\">\r\n        <v-text-field\r\n          v-model=\"newMessage\"\r\n          placeholder=\"Type your message here\"\r\n          outlined\r\n          hint=\"Shift + Enter for a new line, Enter to send: \"\r\n          persistent-hint\r\n          @keyup.enter=\"sendMessage\"\r\n          class=\"message-input mb-13 mx-3\"\r\n        >\r\n        </v-text-field>\r\n        <div class=\"action-buttons\">\r\n          <button @click=\"sendMessage\" elevation=\"0\" color=\"white\" class=\"send-btn px-1 mr-1\" >\r\n            <v-icon color=\"main-green\">mdi-send</v-icon>\r\n          </button>\r\n          <v-btn \r\n            @click=\"openUploadImage\" \r\n            elevation=\"0\" \r\n            color=\"primary\" \r\n            class=\"upload-btn main-green\"\r\n            :class=\"{'upload-btn--mobile': $vuetify.breakpoint.xs}\"\r\n          >\r\n            <v-icon>mdi-paperclip</v-icon>\r\n            <span class=\"d-none d-sm-inline\">Upload</span>\r\n          </v-btn>\r\n        </div>\r\n      </div>\r\n      \r\n    </div>\r\n\r\n    <!-- 圖片彈窗 -->\r\n    <!-- <v-dialog v-model=\"imagePopupVisible\" max-width=\"none\" persistent>\r\n      <v-card class=\"image-popup\">\r\n        <v-btn icon @click=\"closeImagePopup\" class=\"close-btn\">\r\n          <v-icon>mdi-close</v-icon>\r\n        </v-btn>\r\n        <v-img :src=\"selectedImage\" class=\"popup-img\"></v-img>\r\n      </v-card>\r\n    </v-dialog> -->\r\n    <ImagePopup\r\n      :key=\"`imgpop-${popImgKey}`\"\r\n      :image=\"selectedImage\"\r\n      :visible=\"imagePopupVisible\"\r\n      @close=\"closeImagePopup\">\r\n    </ImagePopup>\r\n\r\n    <UploadImage \r\n      :key=\"`imgupload-${uploadImgKey}`\"\r\n      :activeUpload=\"uploadImage\"\r\n      @close=\"closeUploadImage\"\r\n      @update:visible=\"updateVisible\"\r\n      @message-uploaded=\"handleMessageUploaded\">\r\n    </UploadImage>\r\n\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport ChatMessage from './ChatMessage.vue';\r\nimport ProgressLoader from '../common/progessLoading.vue';\r\nimport ImagePopup from './ImagePopup.vue';\r\nimport UploadImage from './UploadImage.vue';\r\nexport default {\r\n  name: 'ChatWindows',\r\n  components: {\r\n    ImagePopup,\r\n    ChatMessage,\r\n    ProgressLoader,\r\n    UploadImage\r\n  },\r\n  data() {\r\n    return {\r\n      newMessage: '',\r\n      selectedImage: '',\r\n      messages: [],\r\n      \r\n      user_name: '',  // 儲存使用者名稱\r\n      user_id: null,\r\n      \r\n      preloader: true,\r\n      imagePopupVisible: false,\r\n      activeProgress: false,\r\n      detectError: false,\r\n      uploadImage: false,\r\n      \r\n      page: 1,\r\n      size: 16,\r\n      popImgKey: 1,\r\n      uploadImgKey: 1,\r\n      activeKey: 1,\r\n      infiniteId: 1,\r\n    };\r\n  },\r\n  created() {\r\n    this.activeProgress = true;\r\n    // setTimeout(() => {\r\n    this.$route.params.id ? this.fetchMessages() : this.routerRedirectTo404();\r\n    // }, 500);\r\n    // if (this.$route.query.code && this.$route.query.state) {\r\n\r\n    //   axios.post('http://127.0.0.1:8000/api/member/line_login', {\r\n    //       code: this.$route.query.code,\r\n    //       state: this.$route.query.state,  // 自己發送的訊息\r\n    //     })\r\n    //     .then((res) => {\r\n    //       localStorage.setItem('mackay', JSON.stringify(res.data.jwt_token));\r\n    //       console.log('LINE LOGIN Success:');\r\n    //     })\r\n    //     .catch((err) => {\r\n    //       console.error('LINE LOGIN Failed:', err);\r\n    //     });\r\n    // }\r\n  },\r\n\r\n  mounted() {\r\n    document.body.classList.add('disable-scroller');\r\n    document.documentElement.style.overflow = 'hidden';\r\n  },\r\n\r\n  destroyed() {\r\n    document.body.classList.remove('disable-scroller');\r\n    document.documentElement.style.overflow = 'unset';\r\n  },\r\n\r\n  // mounted() {\r\n    // 頁面初次加載時滾動到底部\r\n    // this.$nextTick(() => {\r\n    //   const chatWindow = this.$refs.chatWindow;\r\n    //   if (chatWindow) {\r\n    //     chatWindow.scrollTop = chatWindow.scrollHeight;\r\n    //   }\r\n    // });\r\n  // },\r\n  // watch: {\r\n    // messages() {\r\n    //   // 當 messages 更新時，滾動到底部\r\n    //   this.$nextTick(() => {\r\n    //     const chatWindow = this.$refs.chatWindow;\r\n    //     if (chatWindow) {\r\n    //       chatWindow.scrollTop = chatWindow.scrollHeight;\r\n    //     }\r\n    //   });\r\n    // }\r\n  // },\r\n  methods: {\r\n    // 獲取訊息列表\r\n    fetchMessages() {\r\n      let userId\r\n      let fetch_user_id\r\n      let fetch_chatRoom\r\n      const getJWTData = JSON.parse(localStorage.getItem('mackay'));\r\n      if (this.userProfile.super_user){\r\n         fetch_user_id = this.storeUserId\r\n        //  fetch_chatRoom = this.storeChatRoom\r\n         if (getJWTData.room_path) {\r\n            fetch_chatRoom = getJWTData.room_path;\r\n          }else {\r\n            fetch_chatRoom = this.storeChatRoom;\r\n          }\r\n      }else {\r\n         fetch_user_id = this.userProfile.id\r\n         fetch_chatRoom = this.userProfile.room_path\r\n      }\r\n      if (fetch_user_id) {\r\n        userId = fetch_user_id\r\n      }else {\r\n        userId = getJWTData.selectedId\r\n      }\r\n      console.log('fetchMessages', this.userProfile.id, this.storeUserId);\r\n      // if (this.userProfile.id !== this.$route.params.id) {\r\n      //   alert('Wrong User');\r\n      //   this.routerRedirectTo404();\r\n      //   return;\r\n      // }\r\n      const chatRoomId = this.$route.params.id.split('-')[0];\r\n      \r\n      if (!this.userProfile.super_user) {\r\n            if (userId != chatRoomId) {\r\n              // alert('Wrong User');\r\n              // alert(userId, chatRoomId);\r\n              this.routerRedirectTo404();\r\n              return;\r\n            \r\n          }\r\n        }else {\r\n          const getJWTData = JSON.parse(localStorage.getItem('mackay'));\r\n          const selectedIdForCheck = getJWTData.selectedId;\r\n          if (selectedIdForCheck != chatRoomId) {\r\n            // alert('Wrong User');\r\n            this.$router.push('/chat')\r\n            return;\r\n          }\r\n        }\r\n\r\n      console.log('fetchMessages 1', userId)\r\n      // axios.get('http://127.0.0.1:8000/api/chat/list?user_id=1&page=' + this.page + '&size=15')\r\n      axios.get(`${this.SERVER_PATH}api/chat/list?`,{\r\n        params: {\r\n          user_id: this.userProfile.id,\r\n          chatRoom: fetch_chatRoom,\r\n          page: this.page,\r\n          size: this.size,\r\n        }\r\n      })\r\n        .then((res) => {\r\n          if (!res.data.count) {\r\n            this.user_name = '';\r\n          } else {\r\n            this.user_name = res.data.results[0].user_name;\r\n            // localStorage.setItem('user_name', this.user_name);\r\n          }\r\n\r\n          console.log(JSON.stringify(res.data));\r\n          this.preloader = false;\r\n          // console.log('fetchMessages 2', this.page);\r\n          this.messages = res.data.results;\r\n          console.table('fetchMessages 3', this.messages);\r\n          // this.user_name = res.data.results[0].user_name;\r\n          // localStorage.setItem('user_name', this.user_name);\r\n          this.page += 1;\r\n          this.infiniteId += 1;\r\n\r\n          if (!res.data.count) {\r\n            this.user_name = '';\r\n          } else {\r\n            this.user_name = res.data.results[0].user_name;\r\n            // localStorage.setItem('user_name', this.user_name);\r\n          }\r\n\r\n          // 頁面初次加載時滾動到底部\r\n          setTimeout(() => {\r\n            this.$nextTick(() => {\r\n              this.activeProgress = false;\r\n              this.activeKey += 1;\r\n              const chatWindow = this.$refs.chatWindow;\r\n              if (chatWindow) {\r\n                chatWindow.scrollTop = chatWindow.scrollHeight;\r\n              }\r\n            });\r\n          },1000)\r\n          \r\n        })\r\n        .catch((err) => {\r\n          this.detectError = true;\r\n          // setTimeout(() => {\r\n          //   this.$router.push({ name: 'chat-list' });\r\n          // }, 500);\r\n          console.error(err.response.status);\r\n          if (err.response.status === 404) {\r\n            this.routerRedirectTo404();\r\n          } else if (err.response.status === 403) {\r\n            this.routerRedirectTo404();\r\n          }else{\r\n            if (this.userProfile.super_user){\r\n              this.$router.push({ name: 'chat-list' });\r\n            }else {\r\n              this.routerRedirectTo404();\r\n            }\r\n          }\r\n          // if (err.response.status === 404) {\r\n          //   xxx\r\n          // } else if (err.response.status === 403) {\r\n          //   xxx\r\n          // }\r\n        });\r\n    },\r\n\r\n    infiniteHandler($state) {\r\n      // let userId\r\n      // let fetch_user_id\r\n      let fetch_chatRoom\r\n      const getJWTData = JSON.parse(localStorage.getItem('mackay'));\r\n      if (this.userProfile.super_user){\r\n        //  fetch_user_id = this.storeUserId\r\n         if (getJWTData.room_path) {\r\n            fetch_chatRoom = getJWTData.room_path;\r\n          }else {\r\n            fetch_chatRoom = this.storeChatRoom;\r\n          }\r\n      }else {\r\n        //  fetch_user_id = this.userProfile.id\r\n         fetch_chatRoom = this.userProfile.room_path\r\n      }\r\n      // if (fetch_user_id) {\r\n      //   userId = fetch_user_id\r\n      // }else {\r\n      //   userId = getJWTData.selectedId\r\n      // }\r\n      if (!this.preloader) {\r\n        axios.get(`${this.SERVER_PATH}api/chat/list?`, {\r\n          params: {\r\n            user_id: this.userProfile.id,\r\n            chatRoom: fetch_chatRoom,\r\n            page: this.page,\r\n            size: this.size,\r\n          },\r\n        }).then(( res ) => {\r\n          // console.log(JSON.stringify(res.data.results));\r\n          // console.log(res.data.count);\r\n          if (!res.data.results.length || res.data.count <= this.size) {\r\n            $state.complete();\r\n          } else {\r\n            console.log('infiniteHandler', this.page);\r\n            this.messages.push(...res.data.results);\r\n\r\n            this.page += 1;\r\n            $state.loaded();\r\n          }\r\n          // if (res.data.count) {\r\n          //   this.page += 1;\r\n          //   this.messages.unshift(res.data.results.slice());\r\n          //   $state.loaded();\r\n          // } else {\r\n          //   $state.complete();\r\n          // }\r\n        });\r\n      }\r\n      \r\n    },\r\n    // 發送訊息並用 axios 將資料 POST 到資料庫\r\n    sendMessage() {\r\n      // let userId\r\n      // let fetch_user_id\r\n      let fetch_chatRoom\r\n      const getJWTData = JSON.parse(localStorage.getItem('mackay'));\r\n      if (this.userProfile.super_user){\r\n        //  fetch_user_id = this.storeUserId\r\n         if (getJWTData.room_path) {\r\n            fetch_chatRoom = getJWTData.room_path;\r\n          }else {\r\n            fetch_chatRoom = this.storeChatRoom;\r\n          }\r\n      }else {\r\n        //  fetch_user_id = this.userProfile.id\r\n         fetch_chatRoom = this.userProfile.room_path\r\n      }\r\n      // if (fetch_user_id) {\r\n      //   userId = fetch_user_id\r\n      // }else {\r\n      //   userId = getJWTData.selectedId\r\n      // }\r\n      if (this.newMessage.trim() !== '') {\r\n        const user_name = this.userProfile.name || '您';\r\n        const isCarerUser = this.userProfile.super_user === true;\r\n\r\n        const messageData = {\r\n          is_carer_user: isCarerUser,\r\n          user_name: user_name,\r\n          media_url: '',\r\n          content: this.newMessage,\r\n          content_type: 'text',\r\n          isFirstDate: ''\r\n        };\r\n\r\n        // 發送到前端 UI\r\n        this.messages.push(messageData);\r\n        this.newMessage = '';\r\n        // 發送滾動到底部\r\n        this.$nextTick(() => {\r\n          const chatWindow = this.$refs.chatWindow;\r\n          if (chatWindow) {\r\n            chatWindow.scrollTop = chatWindow.scrollHeight;\r\n          }\r\n        });\r\n\r\n        // 發送 POST 請求到後端\r\n        axios.post(`${this.SERVER_PATH}api/chat/control`, {\r\n          user_id: this.userProfile.id,\r\n          chatRoom: fetch_chatRoom,\r\n          is_carer_user: isCarerUser,  // 根據 super_user 設置\r\n          content: messageData.content,\r\n          content_type: 'text'\r\n        })\r\n        .then((response) => {\r\n          console.log('Message sent successfully:', response.data);\r\n        })\r\n        .catch((err) => {\r\n          console.error('Error sending message:', err);\r\n        });\r\n      }\r\n    },\r\n    // 開啟圖片彈窗\r\n    openImagePopup(imageUrl) {\r\n      this.selectedImage = imageUrl;\r\n      this.imagePopupVisible = true;\r\n      this.popImgKey += 1\r\n      console.log('openImagePopup', this.imagePopupVisible)\r\n    },\r\n    // 關閉圖片彈窗\r\n    closeImagePopup(value) {\r\n      this.imagePopupVisible = value;\r\n      this.selectedImage = '';\r\n      this.popImgKey += 1\r\n    },\r\n    updateVisible(val) {\r\n      this.imagePopupVisible = val\r\n    },\r\n    openUploadImage() {\r\n      this.uploadImage = true;\r\n      this.uploadImgKey += 1\r\n    },\r\n    closeUploadImage() {\r\n      this.uploadImage = false;\r\n    },\r\n    handleMessageUploaded(messageData) {\r\n      console.log('Message uploaded:', messageData);\r\n      // 在這裡更新 this.messages 陣列\r\n      this.messages.push(messageData);\r\n    },\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.chat-container {\r\n  height: calc(100dvh - 160px);\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n  padding: 0;\r\n}\r\n\r\n.chat-window {\r\n  flex: 1;\r\n  background-color: #fff;\r\n  padding: 0;\r\n  /* height: calc(100vh - 205px); */\r\n  overflow-y: auto;\r\n  position: relative;\r\n}\r\n\r\n.send-message-layout {\r\n  padding-top: 2px;\r\n  padding-right: 12px;\r\n  display: flex;\r\n  align-items: flex-start;\r\n}\r\n\r\n.message-input {\r\n  border-top: 1px solid #eee;\r\n}\r\n\r\n.image-popup {\r\n  background-color: rgba(0, 0, 0, 0.8); \r\n  width: calc(9/12 * 100vw); \r\n  height: 100vh;\r\n  position: relative;\r\n}\r\n\r\n.popup-img {\r\n  width: 100%;\r\n  height: auto;\r\n}\r\n.layout {\r\n  align-items: baseline;\r\n}\r\n.close-btn {\r\n  position: absolute;\r\n  top: 10px;\r\n  right: 10px;\r\n  color: white;\r\n  z-index: 101;\r\n}\r\n.v-btn.send-btn:hover{\r\n  background-color: #fff !important;\r\n}\r\n.v-dialog__content {\r\n  z-index: 100;\r\n}\r\n.infinite-loading-container{\r\n  font-size: 12px;\r\n  color: #ccc;\r\n  margin-top: 15px;\r\n  margin-bottom: 15px;\r\n}\r\n.upload-btn {\r\n  height: 40px;\r\n}\r\n\r\n.upload-btn--mobile {\r\n  min-width: 40px !important;\r\n  width: 40px;\r\n  height: 40px !important;\r\n  padding: 0 !important;\r\n  margin-top: 8px;\r\n}\r\n.action-buttons {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-top: 8px;\r\n}\r\n@media all and (min-width: 962px) {\r\n  .chat-window {\r\n    height: calc(100vh - 205px);\r\n  }\r\n}\r\n@media (max-width: 961px) {\r\n  .chat-window {\r\n    height: calc(100vh - 160px);\r\n  }\r\n}\r\n@media (max-width: 428px) {\r\n  .message-input {\r\n    margin-bottom: 8px !important;\r\n  }\r\n  /* .chat-container{\r\n    height: calc(100vh - 36px);\r\n  } */\r\n}\r\n\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChatWindows.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChatWindows.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ChatWindows.vue?vue&type=template&id=be037fe6&scoped=true\"\nimport script from \"./ChatWindows.vue?vue&type=script&lang=js\"\nexport * from \"./ChatWindows.vue?vue&type=script&lang=js\"\nimport style0 from \"./ChatWindows.vue?vue&type=style&index=0&id=be037fe6&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"be037fe6\",\n  null\n  \n)\n\nexport default component.exports","import './VBottomSheet.sass'\n\n// Extensions\nimport VDialog from '../VDialog/VDialog'\n\n/* @vue/component */\nexport default VDialog.extend({\n  name: 'v-bottom-sheet',\n\n  props: {\n    inset: Boolean,\n    maxWidth: [String, Number],\n    transition: {\n      type: String,\n      default: 'bottom-sheet-transition',\n    },\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        ...VDialog.options.computed.classes.call(this),\n        'v-bottom-sheet': true,\n        'v-bottom-sheet--inset': this.inset,\n      }\n    },\n  },\n})\n","// Styles\nimport './VTextarea.sass'\n\n// Extensions\nimport VTextField from '../VTextField/VTextField'\n\n// Utilities\nimport mixins from '../../util/mixins'\n\n// Types\nimport Vue from 'vue'\n\ninterface options extends Vue {\n  $refs: {\n    input: HTMLTextAreaElement\n  }\n}\n\nconst baseMixins = mixins<options &\n  InstanceType<typeof VTextField>\n>(\n  VTextField\n)\n\n/* @vue/component */\nexport default baseMixins.extend({\n  name: 'v-textarea',\n\n  props: {\n    autoGrow: Boolean,\n    noResize: Boolean,\n    rowHeight: {\n      type: [Number, String],\n      default: 24,\n      validator: (v: any) => !isNaN(parseFloat(v)),\n    },\n    rows: {\n      type: [Number, String],\n      default: 5,\n      validator: (v: any) => !isNaN(parseInt(v, 10)),\n    },\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        'v-textarea': true,\n        'v-textarea--auto-grow': this.autoGrow,\n        'v-textarea--no-resize': this.noResizeHandle,\n        ...VTextField.options.computed.classes.call(this),\n      }\n    },\n    noResizeHandle (): boolean {\n      return this.noResize || this.autoGrow\n    },\n  },\n\n  watch: {\n    autoGrow (val: boolean) {\n      this.$nextTick(() => {\n        val\n          ? this.calculateInputHeight()\n          : this.$refs.input?.style.removeProperty('height')\n      })\n    },\n    lazyValue () {\n      this.autoGrow && this.$nextTick(this.calculateInputHeight)\n    },\n    rowHeight () {\n      this.autoGrow && this.$nextTick(this.calculateInputHeight)\n    },\n  },\n\n  mounted () {\n    setTimeout(() => {\n      this.autoGrow && this.calculateInputHeight()\n    }, 0)\n  },\n\n  methods: {\n    calculateInputHeight () {\n      const input = this.$refs.input\n      if (!input) return\n\n      input.style.height = '0'\n      const height = input.scrollHeight\n      const minHeight = parseInt(this.rows, 10) * parseFloat(this.rowHeight)\n      // This has to be done ASAP, waiting for Vue\n      // to update the DOM causes ugly layout jumping\n      input.style.height = Math.max(minHeight, height) + 'px'\n    },\n    genInput () {\n      const input = VTextField.options.methods.genInput.call(this)\n\n      input.tag = 'textarea'\n      delete input.data!.attrs!.type\n      input.data!.attrs!.rows = this.rows\n\n      return input\n    },\n    onInput (e: Event) {\n      VTextField.options.methods.onInput.call(this, e)\n      this.autoGrow && this.calculateInputHeight()\n    },\n    onKeyDown (e: KeyboardEvent) {\n      // Prevents closing of a\n      // dialog when pressing\n      // enter\n      if (this.isFocused && e.keyCode === 13) {\n        e.stopPropagation()\n      }\n\n      this.$emit('keydown', e)\n    },\n  },\n})\n","// Components\nimport VToolbar from './VToolbar'\n\n// Utilities\nimport { createSimpleFunctional } from '../../util/helpers'\n\nconst VToolbarTitle = createSimpleFunctional('v-toolbar__title')\nconst VToolbarItems = createSimpleFunctional('v-toolbar__items')\n\nexport {\n  VToolbar,\n  VToolbarItems,\n  VToolbarTitle,\n}\n\nexport default {\n  $_vuetify_subcomponents: {\n    VToolbar,\n    VToolbarItems,\n    VToolbarTitle,\n  },\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-bottom-sheet',{attrs:{\"inset\":\"\"},model:{value:(_vm.localVisible),callback:function ($$v) {_vm.localVisible=$$v},expression:\"localVisible\"}},[_c('v-sheet',{staticClass:\"message-layout\"},[_c('v-toolbar',{attrs:{\"dense\":\"\",\"color\":\"main-green\",\"dark\":\"\"}},[_c('v-spacer'),_c('v-toolbar-title',{staticClass:\"text-center mx-auto\"},[_vm._v(\"New Message\")]),_c('v-spacer'),_c('v-btn',{staticClass:\"ml-n6\",attrs:{\"icon\":\"\",\"dark\":\"\"},on:{\"click\":_vm.close}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1)],1),_c('v-card-text',{staticClass:\"message-input-area\"},[_c('v-textarea',{staticClass:\"message-textarea\",attrs:{\"outlined\":\"\",\"color\":\"main-green\",\"auto-grow\":\"\",\"rows\":\"4\",\"row-height\":\"30\",\"placeholder\":\"Type your message here\",\"hide-details\":\"\"},model:{value:(_vm.newMessage),callback:function ($$v) {_vm.newMessage=$$v},expression:\"newMessage\"}}),_c('div',{staticClass:\"action-buttons-grid\"},[_c('div',{staticClass:\"grid-item\"},[_c('v-btn',{staticClass:\"action-btn\",attrs:{\"color\":\"main-green\",\"text\":\"\"},on:{\"click\":_vm.openUploadImage}},[_c('div',{staticClass:\"d-flex\"},[_c('v-icon',{staticClass:\"mb-1\"},[_vm._v(\"mdi-paperclip\")]),_c('span',{staticClass:\"caption\"},[_vm._v(\"Upload\")])],1)])],1),_c('div',{staticClass:\"grid-item text-right\"},[_c('v-btn',{staticClass:\"action-btn\",attrs:{\"color\":\"main-green\",\"text\":\"\",\"disabled\":!_vm.newMessage.trim()},on:{\"click\":_vm.sendMessage}},[_c('div',{staticClass:\"d-flex\"},[_c('v-icon',{staticClass:\"mb-1\"},[_vm._v(\"mdi-send\")]),_c('span',{staticClass:\"caption\"},[_vm._v(\"Send\")])],1)])],1)])],1)],1),_c('UploadImage',{key:`imgupload-${_vm.uploadImgKey}`,attrs:{\"activeUpload\":_vm.uploadImage},on:{\"close\":_vm.closeUploadImage,\"update:visible\":_vm.updateVisible,\"message-uploaded\":_vm.handleMessageUploaded}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-bottom-sheet\r\n    v-model=\"localVisible\"\r\n    inset\r\n  >\r\n    <v-sheet class=\"message-layout\">\r\n      <!-- 頂部工具欄 -->\r\n      <v-toolbar dense color=\"main-green\" dark>\r\n        <v-spacer></v-spacer>\r\n        <v-toolbar-title class=\"text-center mx-auto\">New Message</v-toolbar-title>\r\n        <v-spacer></v-spacer>\r\n        <v-btn icon dark @click=\"close\" class=\"ml-n6\">\r\n          <v-icon>mdi-close</v-icon>\r\n        </v-btn>\r\n      </v-toolbar>\r\n\r\n      <!-- 訊息輸入區域 -->\r\n      <v-card-text class=\"message-input-area\">\r\n        <v-textarea\r\n          v-model=\"newMessage\"\r\n          outlined\r\n          color=\"main-green\"\r\n          auto-grow\r\n          rows=\"4\"\r\n          row-height=\"30\"\r\n          placeholder=\"Type your message here\"\r\n          hide-details\r\n          class=\"message-textarea\"\r\n        ></v-textarea>\r\n\r\n        <!-- 按鈕區域 -->\r\n        <div class=\"action-buttons-grid\">\r\n          <!-- 左側：附件按鈕 -->\r\n          <div class=\"grid-item\">\r\n            <v-btn\r\n              color=\"main-green\"\r\n              text\r\n              class=\"action-btn\"\r\n              @click=\"openUploadImage\"\r\n            >\r\n              <div class=\"d-flex\">\r\n                <v-icon class=\"mb-1\">mdi-paperclip</v-icon>\r\n                <span class=\"caption\">Upload</span>\r\n              </div>\r\n            </v-btn>\r\n          </div>\r\n\r\n          <!-- 右側：發送按鈕 -->\r\n          <div class=\"grid-item text-right\">\r\n            <v-btn\r\n              color=\"main-green\"\r\n              text\r\n              class=\"action-btn\"\r\n              @click=\"sendMessage\"\r\n              :disabled=\"!newMessage.trim()\"\r\n            >\r\n              <div class=\"d-flex\">\r\n                <v-icon class=\"mb-1\">mdi-send</v-icon>\r\n                <span class=\"caption\">Send</span>\r\n              </div>\r\n            </v-btn>\r\n          </div>\r\n        </div>\r\n      </v-card-text>\r\n    </v-sheet>\r\n\r\n    <!-- 圖片上傳組件 -->\r\n    <UploadImage \r\n      :key=\"`imgupload-${uploadImgKey}`\"\r\n      :activeUpload=\"uploadImage\"\r\n      @close=\"closeUploadImage\"\r\n      @update:visible=\"updateVisible\"\r\n      @message-uploaded=\"handleMessageUploaded\"\r\n    ></UploadImage>\r\n  </v-bottom-sheet>\r\n</template>\r\n\r\n<script>\r\nimport UploadImage from './UploadImage.vue';\r\n\r\nexport default {\r\n  name: 'MsgLayout',\r\n  \r\n  components: {\r\n    UploadImage\r\n  },\r\n\r\n  props: {\r\n    visible: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      newMessage: '',\r\n      uploadImage: false,\r\n      uploadImgKey: 1,\r\n      localVisible: false\r\n    };\r\n  },\r\n\r\n  watch: {\r\n    visible(val) {\r\n      this.localVisible = val;\r\n      if (!val) {\r\n        this.newMessage = '';\r\n      }\r\n    },\r\n    localVisible(val) {\r\n      this.$emit('update:visible', val);\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    close() {\r\n      this.localVisible = false;\r\n      this.newMessage = '';\r\n    },\r\n\r\n    sendMessage() {\r\n      if (this.newMessage.trim()) {\r\n        this.$emit('send-message', this.newMessage);\r\n        this.newMessage = '';\r\n        this.close();\r\n      }\r\n    },\r\n\r\n    openUploadImage() {\r\n      this.uploadImage = true;\r\n      this.uploadImgKey += 1;\r\n    },\r\n\r\n    closeUploadImage() {\r\n      this.uploadImage = false;\r\n    },\r\n\r\n    updateVisible(val) {\r\n      this.uploadImage = val;\r\n    },\r\n\r\n    handleMessageUploaded(messageData) {\r\n      this.$emit('message-uploaded', messageData);\r\n      this.close();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.v-toolbar__title{\r\n  font-size: 1rem;\r\n}\r\n.message-layout {\r\n  padding-bottom: 16px;\r\n  border-top-left-radius: 16px;\r\n  border-top-right-radius: 16px;\r\n}\r\n\r\n.message-input-area {\r\n  width: 100%;\r\n  max-width: 600px;\r\n  margin: 0 auto;\r\n  padding: 16px;\r\n}\r\n\r\n.message-textarea {\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.action-buttons-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr; /* 兩列等寬 */\r\n  gap: 8px;\r\n  padding: 0 8px;\r\n  max-width: 600px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.grid-item {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.grid-item:last-child {\r\n  justify-content: flex-end;\r\n}\r\n\r\n.action-btn {\r\n  min-width: 64px;\r\n  height: auto;\r\n  padding: 8px 0;\r\n}\r\n\r\n.action-btn .v-icon {\r\n  font-size: 24px;\r\n}\r\n\r\n.action-btn .caption {\r\n  font-size: 12px;\r\n  line-height: 1.35;\r\n  margin-top: 4px;\r\n}\r\n\r\n.action-btn.v-btn--disabled {\r\n  opacity: 0.6;\r\n}\r\n\r\n/* .toolbar-title {\r\n  position: absolute;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  font-size: 1rem;\r\n}\r\n\r\n.close-btn {\r\n  position: absolute;\r\n  right: 0;\r\n} */\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MsgLayout.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MsgLayout.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./MsgLayout.vue?vue&type=template&id=b6dc84f6&scoped=true\"\nimport script from \"./MsgLayout.vue?vue&type=script&lang=js\"\nexport * from \"./MsgLayout.vue?vue&type=script&lang=js\"\nimport style0 from \"./MsgLayout.vue?vue&type=style&index=0&id=b6dc84f6&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b6dc84f6\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <v-app>\r\n    <!-- Topbar 區域 -->\r\n    <v-app-bar color=\"main-green\" elevation=\"0\" dense>\r\n      <!-- <v-responsive class=\"d-sm-none\">\r\n        <v-app-bar-nav-icon></v-app-bar-nav-icon>\r\n      </v-responsive> -->\r\n      \r\n        <!-- <v-img src=\"../assets/logo_dr.png\" class=\"main-logo\"></v-img> -->\r\n        <img src=\"../assets/logo_dr.png\" class=\"main-logo\" alt=\"logo\">\r\n      <!-- <header class=\"chat-title text-h6 font-weight-black\">星禾互聯</header> -->\r\n      <v-btn\r\n        v-if=\"userProfile.super_user\"\r\n        text\r\n        class=\"ml-6 white--text d-md-block  d-none\"\r\n        @click=\"goChatList()\"\r\n      >\r\n        My Patients\r\n      </v-btn>\r\n      <v-spacer>\r\n        <template>\r\n          <v-tabs align-with-title background-color=\"transparent\">\r\n            \r\n            <!-- <v-tab v-for=\"items, index in topBarNavList\" class=\"white--text font-weight-bold\" active-class=\"white v-dark2--text font-weight-bold\" :key=\"index\">\r\n              {{ items }}\r\n            </v-tab> -->\r\n            <!-- <v-tab class=\"white--text font-weight-bold\" active-class=\"white v-dark2--text font-weight-bold\">One</v-tab>\r\n            <v-tab class=\"white--text font-weight-bold\" active-class=\"white v-dark2--text font-weight-bold\">Two</v-tab>\r\n            <v-tab class=\"white--text font-weight-bold\" active-class=\"white v-dark2--text font-weight-bold\">Three</v-tab> -->\r\n\r\n          </v-tabs>\r\n        </template>\r\n      </v-spacer>\r\n      <!-- 新增照片區域切換按鈕 -->\r\n      <!-- <v-btn\r\n        icon\r\n        class=\"white--text d-md-none\"\r\n        @click=\"togglePhotoSection\"\r\n      >\r\n        <v-icon>{{ isPhotoSectionOpen ? 'mdi-close' : 'mdi-image' }}</v-icon>\r\n      </v-btn> -->\r\n      <v-menu offset-y>\r\n        <template v-slot:activator=\"{ on, attrs }\">\r\n          <v-btn \r\n            class=\"dropdown-btn\" \r\n            v-bind=\"attrs\" \r\n            v-on=\"on\" \r\n            rounded \r\n            color=\"normal\"\r\n            :small='getRwdType === \"mobile\" ? true : false'\r\n            @click=\"handleDropdownClick\"\r\n          >\r\n            <v-avatar :size=\"getRwdType !== 'mobile' ? 30 : 20\">\r\n              <v-img :src=\"thumb_avatar\"></v-img>\r\n            </v-avatar>\r\n            <span class=\"ml-2 d-none d-sm-block\">{{ username }}</span>\r\n            <v-icon right>mdi-chevron-down</v-icon>\r\n          </v-btn>\r\n        </template>\r\n        <v-list dense>\r\n          <!-- 手機版顯示用戶名稱 -->\r\n          <v-list-item class=\"d-sm-none\">\r\n            <v-list-item-title class=\"user-name\">{{ username }}</v-list-item-title>\r\n          </v-list-item>\r\n          <!-- 手機版顯示分隔線 -->\r\n          <v-divider class=\"d-sm-none\"></v-divider>\r\n          <!-- 登出按鈕 -->\r\n          <v-list-item @click=\"logout\">\r\n            <v-list-item-title class=\"logoutBtn\">log out</v-list-item-title>\r\n          </v-list-item>\r\n        </v-list>\r\n      </v-menu>\r\n    </v-app-bar>\r\n\r\n    <!-- 主內容區塊 -->\r\n    <v-container fluid class=\"fill-height\">\r\n      <v-row>\r\n        <!-- 左側：聊天室區域 -->\r\n        <v-col :cols=\"12\" :md=\"8\" class=\"chat-section\">\r\n          <v-toolbar flat dense class=\"w-100 searchChatToolBar\">\r\n            <!-- <div class=\"d-flex align-center\">\r\n              <v-avatar size=\"30\">\r\n                <v-img src=\"https://cdn.vuetifyjs.com/images/john.jpg\"></v-img>\r\n              </v-avatar>\r\n              <v-toolbar-title class=\"pl-2 text-subtitle-1 font-weight-medium\">照護專員</v-toolbar-title>\r\n            </div> -->\r\n\r\n            <!-- <v-spacer></v-spacer>\r\n            <v-spacer></v-spacer>\r\n            <v-spacer></v-spacer> -->\r\n\r\n            <v-text-field\r\n              v-model=\"searchChat\"\r\n              prepend-inner-icon=\"mdi-magnify\"\r\n              label=\"Search for a chat\"\r\n              dense\r\n              outlined\r\n              color=\"main-green\"\r\n              placeholder=\"Search for a chat\"\r\n              hide-details\r\n              class=\"searchChatBar\"\r\n              @keyup.enter=\"performSearch\"\r\n              @input=\"onInput\"\r\n            ></v-text-field>\r\n            \r\n            <!-- 搜尋結果列表 -->\r\n            <v-list v-if=\"searchResults.length > 0 || noResults\" class=\"search-results-list\">\r\n              <template v-if=\"searchResults.length > 0\">\r\n                <v-list-item\r\n                  v-for=\"(result, index) in searchResults\"\r\n                  :key=\"index\"\r\n                  @click=\"scrollToMessage(result.index)\"\r\n                >\r\n                  <v-list-item-content>\r\n                    <v-list-item-title>{{ result.content }}</v-list-item-title>\r\n                  </v-list-item-content>\r\n                </v-list-item>\r\n              </template>\r\n\r\n              <!-- 沒有搜尋結果時顯示 -->\r\n              <template v-else>\r\n                <v-list-item>\r\n                  <v-list-item-content>\r\n                    <v-list-item-title>No records found</v-list-item-title>\r\n                  </v-list-item-content>\r\n                </v-list-item>\r\n              </template>\r\n            </v-list>\r\n          </v-toolbar>\r\n          <chat-windows class=\"chatWindows\" ref=\"chatWindows\"></chat-windows>\r\n\r\n        </v-col>\r\n\r\n        <!-- 右側：照片列表區域 -->\r\n        <wound-photos\r\n          class=\"photo-section\"\r\n          :class=\"{\r\n            'photo-section--mobile': $vuetify.breakpoint.smAndDown,\r\n            'photo-section--open': isPhotoSectionOpen && $vuetify.breakpoint.smAndDown\r\n          }\"\r\n          :albums=\"albums\"\r\n          :current-album.sync=\"currentAlbum\"\r\n          :selected-patient-id=\"currentAlbum\"\r\n          :selectedChatroom=\"selectedChatroom\"\r\n          @update:current-album=\"updateCurrentAlbum\"\r\n        ></wound-photos>\r\n      </v-row>\r\n\r\n      <!-- 修改手機版功能按鈕區 -->\r\n      <div \r\n        class=\"mobile-actions d-md-none\"\r\n        :class=\"{'mobile-actions--hidden': isMessageLayoutOpen}\"\r\n      >\r\n        <div class=\"mobile-actions-container pt-1 pb-2 px-1\">\r\n          \r\n          <!-- 照片區域切換按鈕 -->\r\n          <v-btn\r\n            elevation='0'\r\n            text\r\n            class=\"mobile-action-btn rounded-lg\"\r\n            :class=\"{'active': isPhotoSectionOpen}\"\r\n            @click=\"togglePhotoSection\"\r\n          >\r\n            <div class=\"d-flex flex-column align-center\">\r\n              <v-icon class=\"action-icon\">{{ isPhotoSectionOpen ? 'mdi-arrow-left' : 'mdi-image' }}</v-icon>\r\n              <span class=\"action-text\">{{ isPhotoSectionOpen ? 'Back' : 'Photos' }}</span>\r\n            </div>\r\n          </v-btn>\r\n\r\n          <!-- 新增的上傳圖片按鈕 -->\r\n          <v-btn\r\n            elevation='0'\r\n            text\r\n            class=\"mobile-action-btn py-1 rounded-lg\"\r\n            @click=\"openUploadImage\"\r\n          >\r\n            <div class=\"d-flex flex-column align-center\">\r\n              <v-icon class=\"action-icon\">mdi-paperclip</v-icon>\r\n              <span class=\"action-text\">Upload</span>\r\n            </div>\r\n          </v-btn>\r\n\r\n          <!-- 訊息輸入按鈕 -->\r\n          <v-btn\r\n            elevation='0'\r\n            text\r\n            class=\"mobile-action-btn rounded-lg\"\r\n            @click=\"openMessageLayout\"\r\n          >\r\n            <div class=\"d-flex flex-column align-center\">\r\n              <v-icon class=\"action-icon\">mdi-message-text</v-icon>\r\n              <span class=\"action-text\">Message</span>\r\n            </div>\r\n          </v-btn>\r\n\r\n          <!-- My Patients 按鈕 -->\r\n          <v-btn\r\n            v-if=\"userProfile.super_user\"\r\n            elevation='0'\r\n            text\r\n            class=\"mobile-action-btn rounded-lg\"\r\n            @click=\"goChatList\"\r\n          >\r\n            <div class=\"d-flex flex-column align-center\">\r\n              <v-icon class=\"action-icon\">mdi-account-multiple</v-icon>\r\n              <span class=\"action-text\">Patients</span>\r\n            </div>\r\n          </v-btn>\r\n        </div>\r\n      </div>\r\n    </v-container>\r\n\r\n    <!-- 添加 MsgLayout 組件 -->\r\n    <msg-layout\r\n      :visible.sync=\"isMessageLayoutOpen\"\r\n      @send-message=\"handleSendMessage\"\r\n      @message-uploaded=\"handleMessageUploaded\"\r\n    ></msg-layout>\r\n\r\n    <!-- 添加 UploadImage 組件 -->\r\n    <UploadImage \r\n      :key=\"`imgupload-${uploadImgKey}`\"\r\n      :activeUpload=\"uploadImage\"\r\n      @close=\"closeUploadImage\"\r\n      @update:visible=\"updateVisible\"\r\n      @message-uploaded=\"handleMessageUploaded\"\r\n    ></UploadImage>\r\n  </v-app>\r\n</template>\r\n\r\n<script>\r\nimport ChatWindows from '../components/ChatWindows.vue';\r\nimport WoundPhotos from '../components/WoundPhotos.vue';\r\nimport MsgLayout from '../components/MsgLayout.vue';\r\nimport UploadImage from '../components/UploadImage.vue';\r\nimport { mapMutations } from 'vuex';\r\n\r\nexport default {\r\n  components: {\r\n    ChatWindows,\r\n    WoundPhotos,\r\n    MsgLayout,\r\n    UploadImage\r\n  },\r\n  data() {\r\n    return {\r\n      username: '使用者',\r\n      thumb_avatar: '',\r\n      searchChat: '', // 搜尋框中的文字\r\n      searchResults: [], // 儲存搜尋結果\r\n      noResults: false, // 用於顯示沒有搜尋結果的訊息\r\n      topBarNavList: ['One', 'Two', 'Three'],\r\n      chatRecord: [],\r\n      albums: [],\r\n      currentAlbum: 0,\r\n      selectedChatroom: '',\r\n      isPhotoSectionOpen: false,\r\n      isMessageLayoutOpen: false,\r\n      uploadImage: false, // 新增的狀態\r\n      uploadImgKey: 1, // 新增的狀態\r\n    };\r\n  },\r\n  computed: {\r\n    currentPhotos() {\r\n      return this.albums[this.currentAlbum]?.photos || [];\r\n    },\r\n  },\r\n  methods: {\r\n    updateCurrentAlbum(newAlbumIndex) {\r\n      this.currentAlbum = newAlbumIndex;\r\n    },\r\n   \r\n    // 當輸入改變時，更新搜尋結果\r\n    onInput() {\r\n      this.performSearch();\r\n    },\r\n    // 執行搜尋\r\n    performSearch() {\r\n      const searchText = this.searchChat.trim().toLowerCase();\r\n      if (searchText) {\r\n        const results = this.$refs.chatWindows.messages\r\n          .map((msg, index) => ({ content: msg.content, index }))\r\n          .filter((msg) => msg.content.toLowerCase().includes(searchText));\r\n\r\n        if (results.length > 0) {\r\n          this.searchResults = results;\r\n          this.noResults = false;\r\n        } else {\r\n          this.searchResults = [];\r\n          this.noResults = true; // 當沒有搜尋結果時，設置為 true\r\n        }\r\n      } else {\r\n        this.searchResults = [];\r\n        this.noResults = false; // 清除搜尋結果時，隱藏提示\r\n      }\r\n    },\r\n\r\n    // 滾動到指定訊息\r\n    scrollToMessage(index) {\r\n      const chatWindow = this.$refs.chatWindows.$refs.chatWindow; // 獲取 .chat-window 容器\r\n      const chatMessageElements = chatWindow.children; // 獲取所有訊息元素\r\n\r\n      if (chatMessageElements[index]) {\r\n        // 計算目標訊息相對於 chatWindow 的 offsetTop\r\n        const targetMessageTop = chatMessageElements[index].offsetTop;\r\n\r\n        // 使用 scrollTop 進行平滑滾動\r\n        chatWindow.scrollTo({\r\n          top: targetMessageTop,\r\n          behavior: 'smooth'\r\n        });\r\n      }\r\n\r\n      this.searchResults = []; // 清空搜尋結果\r\n    },\r\n    goChatList() {\r\n        this.UPDATE_USER_ID(this.userProfile.id);\r\n\r\n        // 取得 localStorage 中的 mackay\r\n        const mackayData = JSON.parse(localStorage.getItem('mackay') || '{}');\r\n        \r\n        // 更新 user_id\r\n        mackayData.user_id = this.userProfile.id;\r\n        \r\n        // 將更新後的物件存回 localStorage\r\n        localStorage.setItem('mackay', JSON.stringify(mackayData));\r\n\r\n        this.$router.push({ path: `/chat/` });\r\n      },\r\n      togglePhotoSection() {\r\n        this.isPhotoSectionOpen = !this.isPhotoSectionOpen;\r\n\r\n        if (this.isPhotoSectionOpen) {\r\n          document.body.classList.add('disable-scroller');\r\n          document.documentElement.style.overflow = 'hidden';\r\n        } else {\r\n          document.body.classList.remove('disable-scroller');\r\n          document.documentElement.style.overflow = 'unset';\r\n        }\r\n\r\n},\r\n\r\ndestroyed() {\r\n  document.body.classList.remove('cc-overflow-hide');\r\n  document.documentElement.style.overflow = 'unset';\r\n      },\r\n      openMessageLayout() {\r\n        if (this.isPhotoSectionOpen) {\r\n          this.isPhotoSectionOpen = false;\r\n        }\r\n        this.isMessageLayoutOpen = true;\r\n      },\r\n      openUploadImage() {\r\n        document.body.classList.add('disable-scroller');\r\n        this.uploadImage = true;\r\n        this.uploadImgKey += 1;\r\n      },\r\n      closeUploadImage() {\r\n        document.body.classList.remove('disable-scroller');\r\n        this.uploadImage = false;\r\n      },\r\n      updateVisible(val) {\r\n        this.uploadImage = val;\r\n      },\r\n      handleSendMessage(message) {\r\n        this.$refs.chatWindows.newMessage = message;\r\n        this.$refs.chatWindows.sendMessage();\r\n      },\r\n      handleMessageUploaded(messageData) {\r\n        this.$refs.chatWindows.handleMessageUploaded(messageData);\r\n      },\r\n      handleDropdownClick() {\r\n        if (this.isPhotoSectionOpen) {\r\n          this.isPhotoSectionOpen = false;\r\n        }\r\n      },\r\n      ...mapMutations(['UPDATE_USER_ID'])\r\n  },\r\n  mounted() {\r\n    if (this.userProfile.name) {\r\n      this.username = this.userProfile.name;\r\n    }\r\n    if (this.userProfile.thumb) {\r\n      this.thumb_avatar = this.userProfile.thumb;\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n$topbarHeight: '38px';\r\n\r\n.v-app-bar .dropdown-btn {\r\n  padding: 0 10px;\r\n}\r\n.v-menu__content{\r\n  z-index: 109 !important;\r\n}\r\n.v-toolbar__content {\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n.main-logo{\r\n  height: 100%;\r\n  padding: 10px 0px;\r\n}\r\n.fill-height {\r\n  height: calc(100vh - 48px);\r\n  padding: unset;\r\n}\r\n.container.fill-height > .row{\r\n  height: 100%;\r\n}\r\n\r\n.chat-section {\r\n  border-right: 1px solid #ccc;\r\n  height: 100%;\r\n  overflow: hidden;\r\n  position: relative;\r\n  z-index: 100;\r\n}\r\n.chat-section header {\r\n  z-index: 104;\r\n}\r\n\r\n\r\n.product-section {\r\n  padding: 0;\r\n  height: 100%;\r\n}\r\n\r\n.chat-title {\r\n  padding-left: 10px;\r\n  color: black;\r\n}\r\n\r\n.dropdown-btn {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.search-results-list {\r\n  max-height: 200px;\r\n  overflow-y: auto;\r\n  background-color: white;\r\n  border: 1px solid #e0e0e0;\r\n  position: absolute;\r\n  top: 47px;;\r\n  z-index: 1003;\r\n  width: 97%;\r\n  border-radius: 4px;\r\n  box-shadow: 0 0 0 5px #555;\r\n}\r\n.logoutBtn{\r\n  cursor: pointer;\r\n  text-align: center;\r\n}\r\n\r\n\r\n/* width */\r\n::-webkit-scrollbar {\r\n  width: 5px;\r\n}\r\n\r\n/* Track */\r\n::-webkit-scrollbar-track {\r\n  background: #f1f1f1; \r\n}\r\n \r\n/* Handle */\r\n::-webkit-scrollbar-thumb {\r\n  background: #888; \r\n}\r\n\r\n/* Handle on hover */\r\n::-webkit-scrollbar-thumb:hover {\r\n  background: #555; \r\n}\r\n\r\n\r\n.photo-section {\r\n  transition: transform 0.3s ease;\r\n  flex: 0 0 33.33333%;\r\n  max-width: 33.33333%;\r\n}\r\n\r\n.photo-section--mobile {\r\n  position: fixed;\r\n  top: #{$topbarHeight};\r\n  right: 0;\r\n  bottom: 0;\r\n  z-index: 200;\r\n  background: white;\r\n  transform: translateX(100%);\r\n  height: calc(100vh - #{$topbarHeight});\r\n  width: 100%;\r\n  flex: 0 0 100%;\r\n  max-width: 100%;\r\n}\r\n\r\n.photo-section--open {\r\n  transform: translateX(0);\r\n}\r\n\r\n@media (max-width: 730px) {\r\n  .fill-height {\r\n    height: calc(100vh - #{$topbarHeight});\r\n    padding: unset;\r\n  }\r\n  .chat-section {\r\n    flex: 0 0 100%;\r\n    max-width: 100%;\r\n    padding-bottom: 60px; /* 為底部按鈕區留出空間 */\r\n  }\r\n\r\n  .mobile-action-btn {\r\n    height: 48px !important;\r\n  }\r\n  \r\n  .photo-section {\r\n    flex: 0 0 100%;\r\n    max-width: 100%;\r\n  }\r\n  \r\n  .photo-section--mobile {\r\n    height: calc(100vh - 99px); /* #{$topbarHeight} (topbar) + 60px (bottom actions) */\r\n  }\r\n\r\n  // .v-app-bar {\r\n  //   height: #{$topbarHeight} !important;\r\n  //   .v-toolbar__content, .v-toolbar__extension {\r\n  //     height: #{$topbarHeight} !important;\r\n  //   }\r\n  //   .main-logo {\r\n  //     width: 100px;\r\n  //     height: 21px;\r\n  //     padding: 0 !important;\r\n  //   }\r\n  // }\r\n}\r\n\r\n/* 確保 row 有正確的 flex 佈局 */\r\n.container.fill-height > .row {\r\n  height: 100%;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n}\r\n.searchChatToolBar:deep  .v-toolbar__content{\r\n  padding: 4px 8px !important;\r\n}\r\n.mobile-actions {\r\n  position: fixed;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  background: white;\r\n  border-top: 1px solid rgba(0, 0, 0, 0.05);\r\n  z-index: 1000;\r\n  transition: transform 0.3s ease; /* 添加過渡效果 */\r\n}\r\n\r\n.mobile-actions--hidden {\r\n  transform: translateY(100%); /* 向下移動隱藏 */\r\n}\r\n\r\n.mobile-actions-container {\r\n  display: flex;\r\n  justify-content: space-around;\r\n  padding: 12px 0 19px;\r\n  max-width: 600px;\r\n  margin: 0 auto;\r\n  position: relative;\r\n}\r\n\r\n.mobile-action-btn {\r\n  flex: 1;\r\n  height: auto;\r\n  min-width: auto;\r\n  padding: 8px 0;\r\n  border-radius: 0;\r\n}\r\n\r\n.action-icon {\r\n  font-size: 20px;\r\n  margin-bottom: 4px;\r\n  color: #757575; /* 未選中的顏色 */\r\n  transition: color 0.3s ease;\r\n}\r\n\r\n.action-text {\r\n  font-size: 10px;\r\n  line-height: 1;\r\n  color: #757575; /* 未選中的顏色 */\r\n  transition: color 0.3s ease;\r\n}\r\n\r\n/* 選中和懸停狀態使用 #2d9ca0 顏色 */\r\n.mobile-action-btn.active .action-icon,\r\n.mobile-action-btn.active .action-text,\r\n.mobile-action-btn:hover .action-icon,\r\n.mobile-action-btn:hover .action-text {\r\n  color: #2d9ca0 !important;\r\n}\r\n\r\n/* 為底部導航添加微妙的陰影 */\r\n.mobile-actions {\r\n  box-shadow: 0 -1px 3px rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n/* 確保 MsgLayout 的 z-index 高於其他元素 */\r\n.v-dialog {\r\n  z-index: 1100 !important;\r\n}\r\n\r\n.user-name {\r\n  color: rgba(0, 0, 0, 0.87);\r\n  font-size: 14px;\r\n  padding: 8px 16px;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./WoundChat.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./WoundChat.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./WoundChat.vue?vue&type=template&id=2a80a966&scoped=true\"\nimport script from \"./WoundChat.vue?vue&type=script&lang=js\"\nexport * from \"./WoundChat.vue?vue&type=script&lang=js\"\nimport style0 from \"./WoundChat.vue?vue&type=style&index=0&id=2a80a966&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2a80a966\",\n  null\n  \n)\n\nexport default component.exports"],"names":["model","value","dialog","callback","expression","_c","attrs","staticClass","_vm","staticRenderFns","props","showText","String","active","Boolean","data","component","render","on","goChatList","key","getRwdType","handleDropdownClick","_v","username","_s","logout","performSearch","searchChat","searchResults","scrollToMessage","class","currentAlbum","$event","isMessageLayoutOpen","isPhotoSectionOpen","togglePhotoSection","updateVisible","detectError","ref","slot","index","media_url","openImagePopup","type","newMessage","$$v","sendMessage","openUploadImage","selectedImage","closeImagePopup","staticStyle","content_type","domProps","name","is_carer_user","required","user_name","content","isFirstDate","computed","contentRegexMatchURL","newContent","urlRegex","matchURL","match","replace","alignmentClass","isSuperUser","$root","userProfile","super_user","messageClass","watch","uploadImage","fileOnDrag","rawName","showLoading","activeUpload","file","filePreviewSrc","fileTips","showErrorMsg","canUpload","displayFileTips","$vuetify","breakpoint","smAndDown","methods","startUpload","userId","id","chatRoom","getJWTData","JSON","parse","localStorage","getItem","room_path","storeChatRoom","isCarerUser","formData","FormData","ts","Date","getTime","console","log","append","split","axios","post","SERVER_PATH","headers","then","response","messageData","$emit","$nextTick","chatWindow","$parent","$refs","scrollTop","scrollHeight","catch","err","error","triggerFileInput","fileInput","click","handleResetInput","$options","handleInputChange","event","target","files","handleUploadFile","_URL","window","URL","webkitURL","img","Image","src","createObjectURL","onload","size","handleDragEnter","preventDefault","handleDragLeave","handleDragDrop","dataTransfer","length","handleChange","handleClose","components","ImagePopup","ChatMessage","ProgressLoader","UploadImage","messages","user_id","preloader","imagePopupVisible","activeProgress","page","popImgKey","uploadImgKey","activeKey","infiniteId","created","$route","params","fetchMessages","routerRedirectTo404","mounted","document","body","classList","add","documentElement","style","overflow","destroyed","remove","fetch_user_id","fetch_chatRoom","storeUserId","selectedId","chatRoomId","selectedIdForCheck","$router","push","get","res","count","results","stringify","table","setTimeout","status","infiniteHandler","$state","complete","loaded","trim","imageUrl","val","closeUploadImage","handleMessageUploaded","VDialog","extend","inset","maxWidth","Number","transition","default","classes","options","call","this","baseMixins","mixins","VTextField","autoGrow","noResize","rowHeight","validator","v","isNaN","parseFloat","rows","parseInt","noResizeHandle","calculateInputHeight","_a","input","removeProperty","lazyValue","height","minHeight","Math","max","genInput","tag","onInput","e","onKeyDown","isFocused","keyCode","stopPropagation","VToolbarTitle","createSimpleFunctional","VToolbarItems","localVisible","visible","close","ChatWindows","WoundPhotos","MsgLayout","thumb_avatar","noResults","topBarNavList","chatRecord","albums","selectedChatroom","currentPhotos","photos","updateCurrentAlbum","newAlbumIndex","searchText","toLowerCase","chatWindows","map","msg","filter","includes","chatMessageElements","children","targetMessageTop","offsetTop","scrollTo","top","behavior","UPDATE_USER_ID","mackayData","setItem","path","openMessageLayout","handleSendMessage","message","mapMutations","thumb"],"sourceRoot":""}