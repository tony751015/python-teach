{"version":3,"file":"css/164.8e08518b.css","mappings":"AACA,2BACE,cACA,UAGA,yCACE,aACA,2BACA,eAIF,uCACE,aACA,yBACA,gBAIJ,kCACE,wBAEF,8BACE,iBAEF,+BACE,kBACA,yBACA,oBAAoB,CACpB,oBAAoB,CACpB,gBAGF,8BACE,gCACA,WACA,+BACA,aAGF,4CACE,WAGF,gCACE,yBACA,sBACA,+BACA,aAGF,+BACE,WAEF,qBACE,eACA,YACA,mBAEA,eCbF,2BACA,wCACA,CACA,+BACA,uBACA,CC8OA,gCACA,kBACA,0BACA,kBACA,aACA,kBACA,aACA,mBACA,uBACA,iCACA,gBACA,CAMA,iCACA,kBACA,MACA,oBACA,WACA,YACA,MACA,CAEA,4CACA,oBACA,CAEA,mCACA,aACA,uBACA,UACA,CAEA,4CACA,kBACA,WACA,YACA,WACA,WACA,YACA,gBACA,kBACA,qBACA,CAEA,gCACA,YACA,aACA,yCACA,kBACA,wBACA,CAEA,qCACA,aACA,sBACA,mBACA,sBACA,CAEA,uCACA,YACA,CAEA,gCACA,aACA,CCwFA,iCACA,4BACA,aACA,sBACA,8BACA,SACA,CAEA,8BACA,OACA,sBACA,UAEA,gBACA,iBACA,CAEA,sCACA,gBACA,mBACA,aACA,sBACA,CAEA,gCACA,yBACA,CAEA,8BACA,gCACA,WACA,aACA,iBACA,CAEA,4BACA,WACA,WACA,CACA,yBACA,oBACA,CACA,4BACA,kBACA,SACA,WACA,WACA,WACA,CACA,uCACA,+BACA,CACA,oCACA,WACA,CACA,6CACA,eACA,WACA,gBACA,kBACA,CACA,6BACA,WACA,CAEA,qCACA,yBACA,WACA,sBACA,oBACA,cACA,CACA,iCACA,aACA,mBACA,cACA,CACA,yBACA,8BACA,0BACA,CACA,CACA,yBACA,8BACA,0BACA,CACA,CACA,yBACA,gCACA,2BACA,CAIA,CCtYA,mCACA,cACA,CACA,iCACA,oBACA,4BACA,4BACA,CAEA,qCACA,WACA,gBACA,cACA,YACA,CAEA,mCACA,kBACA,CAEA,sCACA,aACA,8BACA,QACA,cACA,gBACA,aACA,CAEA,4BACA,aACA,kBACA,CAEA,uCACA,wBACA,CAEA,6BACA,eACA,YACA,aACA,CAEA,qCACA,cACA,CAEA,sCACA,eACA,iBACA,cACA,CAEA,6CACA,UACA,CCxME,iEACE,2BAGJ,yBACE,oBACA,gBACA,cACA,SACA,iBAEA,+CACE,aCjBuB,CDmBvB,4CAHF,+CAII,gBEjBA,kFACE,WAEF,oGACE,yBADF,+FACE,yBAJF,iFACE,sBAEF,mGACE,sBADF,8FACE,sBAGN,qBACE,mBACA,cACA,mBCNmB,CDOnB,eACA,eCPkB,CDQlB,aACA,SCRe,CDSf,WAEF,oEAEE,eCZ0B,CDa1B,iBAIA,gMAEE,eC7BoC,CDkClC,4nCAGE,eCnCyC,CDqC3C,4VACE,QCvCwC,CD0C1C,ojCAGE,cC3C+C,CD6CjD,w/CAIE,sBACA,cCjDiC,CDmDzC,+BACE,uBAGE,0DACE,iBAIJ,0NAIE,sBACA,eCzDoC,CCTxC,6EFsEM,iBC9DuB,CCZ7B,6EF6EM,kBCjEuB,CDoE3B,gCACE,gBAGF,gCACE,YAGF,uDACE,mBErFJ,8EFwFM,kBCtF6B,CCNnC,8EF+FM,iBCzF6B,CCFnC,uFF+FQ,kBC5F4B,CCPpC,uFFsGQ,iBC/F4B,CCHpC,6GFwGU,kBE5GV,6GF+GU,iBG7GZ,0CACE,eAEF,kCACE,sBAEF,qCACE,WACA,aACA,8BAEF,4BACE,YACA,eAEF,8BACE,0BACA,cAMF,+BACE,4BACA,YACA,gBACA,kBACA,YAEF,sCACE,YAIF,kCACE,UACA,YAGF,6BACE,kBACA,WAGF,+BACE,aACA,mBAEF,sCACE,iBACA,gBACA,sBACA,yBACA,kBACA,SACA,aACA,UACA,kBACA,0BAEF,4BACE,eACA,kBAKF,qCACE,UAIF,2CACE,mBAIF,2CACE,gBAIF,iDACE,gBAIF,gCACE,8BACA,mBACA,oBAGF,wCACE,eACA,SACA,QACA,SACA,YACA,gBACA,2BACA,0BACA,WACA,cACA,eAGF,sCACE,wBAGF,wBACE,8BACE,0BACA,cAEF,+BACE,cACA,eACA,oBAGF,oCACE,sBAGF,gCACE,cACA,eAGF,wCACE,2BAiBJ,6CACE,YACA,aACA,eAEF,wDACE,0BAEF,iCACE,eACA,SACA,OACA,QACA,gBACA,qCACA,aACA,8BAGF,yCACE,2BAGF,2CACE,aACA,6BACA,oBACA,gBACA,cACA,kBAGF,oCACE,OACA,YACA,eACA,cACA,gBAGF,8BACE,eACA,kBACA,cACA,0BAGF,8BACE,eACA,cACA,cACA,0BAIF,8NAIE,wBAIF,iCACE,sCAIF,2BACE,uBAGF,4BACE,sBACA,eACA","sources":["webpack://wound-chat/./src/components/ChatMessage.vue","webpack://wound-chat/./src/common/progessLoading.vue","webpack://wound-chat/./src/components/UploadImage.vue","webpack://wound-chat/./src/components/ChatWindows.vue","webpack://wound-chat/./src/components/MsgLayout.vue","webpack://wound-chat/./node_modules/vuetify/src/components/VBottomSheet/VBottomSheet.sass","webpack://wound-chat/./node_modules/vuetify/src/components/VBottomSheet/_variables.scss","webpack://wound-chat/./node_modules/vuetify/src/components/VTextarea/VTextarea.sass","webpack://wound-chat/./node_modules/vuetify/src/components/VTextarea/_variables.scss","webpack://wound-chat/./node_modules/vuetify/src/styles/tools/_rtl.sass","webpack://wound-chat/./src/views/WoundChat.vue"],"sourcesContent":["\r\n.col-auto{\r\n  max-width: 75%;\r\n  padding: 0;\r\n}\r\n.justify-start{\r\n  .img_col{\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    padding-left: 0px;\r\n  }\r\n}\r\n.justify-end{\r\n  .img_col{\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    padding-right: 0px;\r\n  }\r\n}\r\n\r\n.img_col .v-card{\r\n  line-height: 0 !important;\r\n}\r\n.img_col img{\r\n  max-height: 450px;\r\n}\r\n.v-card__text {\r\n  padding: 10px 15px;\r\n  overflow-wrap: break-word;\r\n  word-wrap:break-word;\r\n  word-break:break-all;\r\n  line-height: 1.5;\r\n}\r\n\r\n.own-message {\r\n  background-color: #000 !important;\r\n  color: #fff;\r\n  border-radius: 16px 16px 0 16px;\r\n  margin: 5px 0;\r\n  /* margin-right: 15px; */\r\n}\r\n.own-message .v-card__text{\r\n  color: #FFF;\r\n}\r\n\r\n.other-message {\r\n  background-color: #f8f8f8;\r\n  border: 1px solid #ddd;\r\n  border-radius: 16px 16px 16px 0;\r\n  margin: 5px 0;\r\n}\r\n\r\n.date-divider {\r\n  color: #aaa;\r\n}\r\nimg {\r\n  max-width: 100%;\r\n  height: auto;\r\n  border-radius: 10px;\r\n  // margin-top: 10px;\r\n  cursor: pointer;\r\n}\r\n","<template>\r\n<v-dialog\r\n  v-model=\"dialog\"\r\n  hide-overlay\r\n  persistent\r\n  width=\"300\"\r\n>\r\n  <v-card\r\n    color=\"point-1\"\r\n    elevation=\"1\"\r\n  >\r\n    <v-card-text class=\"loading-text\">\r\n      {{ showText }}\r\n      <v-progress-linear\r\n        indeterminate\r\n        color=\"main-green\"\r\n        class=\"mb-0\"\r\n      ></v-progress-linear>\r\n    </v-card-text>\r\n  </v-card>\r\n</v-dialog>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    props: {\r\n      showText: String,\r\n      active: Boolean,\r\n    },\r\n    \r\n\r\n    data() {\r\n      return {\r\n        dialog: this.active\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .v-dialog {\r\n    box-shadow: 1px 1px 5px #181717 !important;\r\n  }\r\n  .loading-text {\r\n    color:#2D9CA0 !important;\r\n  }\r\n</style>","<template>\r\n    <v-dialog v-model=\"uploadImage\" max-width=\"500px\" scrollable>\r\n      <v-card>\r\n        <v-card-title class=\"font-large font-weight-bold text-center\">\r\n          Upload a photo of the wound\r\n          <span class=\"font-weight-regular font-small grey--text ml-1\">JPG and PNG image files only(Max: 8MB)</span>\r\n        </v-card-title>\r\n        \r\n        <v-card-text>\r\n            <v-container\r\n                class=\"uploader-area\"\r\n                :class=\"{ 'is-dragging': fileOnDrag }\"\r\n                >\r\n                <!-- @click=\"triggerFileInput\" -->\r\n                <!-- @click=\"triggerFileInput\" 點擊作用區 -->\r\n                <!-- 隱藏的 input -->\r\n                \r\n                <!-- 預覽圖顯示區 -->\r\n                <div v-show=\"filePreviewSrc\" class=\"uploader-preview\">\r\n                  <v-btn class=\"uploader-remove-btn\" @click='handleResetInput'>\r\n                    <v-icon color=\"primary\">mdi-trash-can-outline</v-icon>\r\n                  </v-btn>\r\n                  <v-img :src=\"filePreviewSrc\" contain></v-img>\r\n                </div>\r\n\r\n                <div v-show=\"!filePreviewSrc\">\r\n                  <input\r\n                    ref=\"fileInput\"\r\n                    type=\"file\"\r\n                    accept=\"image/jpeg, image/png\"\r\n                    class=\"uploader-input\"\r\n                    @dragenter='handleDragEnter'\r\n                    @dragleave='handleDragEnter'\r\n                    @dragdrop='handleDragDrop'\r\n                    @change='handleInputChange'/>\r\n                 \r\n                  <!-- 防呆訊息顯示區 -->\r\n                  <div class=\"uploader-interface\">\r\n                    <v-icon size=\"40\" color=\"#dcdcdc\">mdi-cloud-upload-outline</v-icon>\r\n                    <p :class=\"{ 'error-message': showErrorMsg }\">{{ displayFileTips }}</p>\r\n                    <!-- <p class=\"text-caption text-grey--text\">Only accept JPG and PNG image files，Max: 8MB</p> -->\r\n                  </div>\r\n                </div>\r\n            </v-container>\r\n        </v-card-text>\r\n  \r\n        <v-card-actions class=\"justify-end\">\r\n          <v-btn text color=\"v-dark\" @click=\"handleClose\">Cancel</v-btn>\r\n          <v-btn color=\"primary\" text :disabled=\"!canUpload\" @click=\"startUpload\">\r\n            <v-progress-circular\r\n              v-if=\"showLoading\"\r\n              indeterminate\r\n              color=\"white\"\r\n              size=\"20\"\r\n            ></v-progress-circular>\r\n            <span v-else>Submit upload</span>\r\n          </v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n  </template>\r\n  \r\n  <script>\r\n  import axios from \"axios\";\r\n\r\n  export default {\r\n    props: {\r\n      activeUpload: Boolean\r\n    },\r\n    data() {\r\n      return {\r\n        uploadImage: this.activeUpload,\r\n        file: null, // 上傳檔案物件\r\n        filePreviewSrc: \"\", // 圖片預覽 URL\r\n        fileOnDrag: false, // 是否處於拖曳狀態\r\n        fileTips: \"Drag and drop or click to upload images\", // 初始提示訊息\r\n        showErrorMsg: false, // 是否顯示錯誤訊息\r\n        canUpload: false, // 是否允許上傳\r\n        showLoading: false, // 傳送按鈕的載入狀態\r\n        \r\n      };\r\n    },\r\n    computed: {\r\n      displayFileTips() {\r\n        // 使用 $vuetify.breakpoint.smAndDown 來檢查是否為手機版\r\n        return this.$vuetify.breakpoint.smAndDown ? \"Click to upload images\" : this.fileTips;\r\n      }\r\n    },\r\n    methods: {\r\n        startUpload() {\r\n          const userId = this.userProfile.id;\r\n          let chatRoom;\r\n          const getJWTData = JSON.parse(localStorage.getItem('mackay'));\r\n          if (this.userProfile.super_user) {\r\n            if (getJWTData.room_path) {\r\n              chatRoom = getJWTData.room_path;\r\n            }else {\r\n              chatRoom = this.storeChatRoom;\r\n            }\r\n            \r\n          } else {\r\n            chatRoom = this.userProfile.room_path;\r\n          }\r\n          const isCarerUser = this.userProfile.super_user === true ? '1' : '0';\r\n          // const chatRoom = this.userProfile.chatRoom;\r\n          const formData = new FormData();\r\n          const ts = new Date().getTime();\r\n          console.log('this.file', this.file);\r\n\r\n          formData.append('user_id', userId);\r\n          formData.append('chatRoom', chatRoom); // 根據 super_user 設置\r\n          formData.append('is_carer_user', isCarerUser); // 根據 super_user 設置\r\n          formData.append('photo_upload', this.file, `${userId}_${ts}.${this.file.type.split('/')[1]}`);\r\n          axios.post(`${this.SERVER_PATH}api/chat/upload`, formData, {\r\n            headers: {\r\n              'Content-Type': 'multipart/form-data',\r\n            },\r\n          })\r\n          .then((response) => {\r\n            // alert('Message sent successfully');\r\n            console.log('Message sent successfully:', response.data);\r\n            this.uploadImage = false;\r\n            const user_name = this.userProfile.name || '您';\r\n            const messageData = {\r\n              is_carer_user: isCarerUser === '1',\r\n              user_name: user_name,\r\n              media_url: this.filePreviewSrc,\r\n              content_type: 'image2',\r\n              content: '',\r\n              isFirstDate: '',\r\n            };\r\n            this.$emit('message-uploaded', messageData);\r\n            this.$root.$emit('upload-success');\r\n            // 發送滾動到底部\r\n            this.$nextTick(() => {\r\n              const chatWindow = this.$parent.$refs.chatWindow;\r\n              if (chatWindow) {\r\n                chatWindow.scrollTop = chatWindow.scrollHeight;\r\n              }\r\n            });\r\n          })\r\n          .catch((err) => {\r\n            console.error('Error sending message:', err);\r\n          });\r\n        },\r\n\r\n        triggerFileInput() {\r\n            // 點擊觸發隱藏的文件選擇器\r\n            this.$refs.fileInput.click();\r\n        },\r\n        handleResetInput() {\r\n          console.log('handleResetInput', this.$refs.fileInput)\r\n          this.canUpload = false;\r\n          this.$refs.fileInput.value = '';\r\n          this.filePreviewSrc = '';\r\n          this.fileTips = this.$options.data().fileTips;\r\n        },\r\n        handleInputChange(event) {\r\n            const file = event.target.files[0];\r\n            if (file) {\r\n              this.handleUploadFile(file);\r\n            }\r\n        },\r\n        handleUploadFile(file) {\r\n            this.fileOnDrag = false;\r\n            this.showErrorMsg = false;\r\n\r\n            if (file.type === \"image/jpeg\" || file.type === \"image/png\") {\r\n              const _URL = window.URL || window.webkitURL;\r\n              const img = new Image();\r\n              img.src = _URL.createObjectURL(file);\r\n\r\n              img.onload = () => {\r\n                if (file.size < 8000 * 1024) {\r\n                  this.fileTips = file.name;\r\n                  this.canUpload = true;\r\n                  this.filePreviewSrc = img.src; // 設置圖片預覽\r\n                  this.file = file; // 設置上傳檔案物件\r\n                } else {\r\n                  this.showErrorMsg = true;\r\n                  this.fileTips = \"File size must be under 8MB\";\r\n                  this.file = null;\r\n                }\r\n              };\r\n            } else {\r\n              this.showErrorMsg = true;\r\n              this.fileTips = \"File format is not supported\";\r\n            }\r\n        },\r\n        handleDragEnter(event) {\r\n            event.preventDefault();\r\n            this.fileOnDrag = true;\r\n        },\r\n        handleDragLeave() {\r\n            this.fileOnDrag = false;\r\n        },\r\n        handleDragDrop(event) {\r\n            event.preventDefault();\r\n            this.fileOnDrag = false;\r\n            const files = event.dataTransfer.files;\r\n            if (files && files.length > 0) {\r\n            const file = files[0];\r\n            this.handleUploadFile(file);\r\n            }\r\n        },\r\n        handleChange(file) {\r\n            this.handleUploadFile(file);\r\n        },\r\n\r\n        handleClose() {\r\n            this.uploadImage = false;\r\n        },\r\n    },\r\n  };\r\n  </script>\r\n  \r\n\r\n  <style scoped>\r\n  .uploader-area {\r\n    position: relative;\r\n    border: 2px dashed #dcdcdc;\r\n    border-radius: 8px;\r\n    padding: 16px;\r\n    text-align: center;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    transition: border-color 0.2s ease;\r\n    min-height: 200px; /* 增加區域高度 */\r\n  }\r\n/* \r\n  .headline {\r\n    font-size: 13px;\r\n  } */\r\n\r\n  .uploader-input {\r\n    position: absolute;\r\n    top: 0;\r\n    text-indent: -9999px;\r\n    width: 100%;\r\n    height: 100%;\r\n    left: 0;\r\n  }\r\n  \r\n  .uploader-area.is-dragging {\r\n    border-color: #42a5f5;\r\n  }\r\n  \r\n  .uploader-preview {\r\n    display: flex;\r\n    justify-content: center;\r\n    width: 100%;\r\n  }\r\n\r\n  .v-btn.uploader-remove-btn {\r\n    position: absolute;\r\n    z-index: 30;\r\n    bottom: 10px;\r\n    right: 10px;\r\n    width: 40px;\r\n    height: 40px;\r\n    min-width: unset;\r\n    border-radius: 50%;\r\n    background-color: #fff;\r\n  }\r\n\r\n  .image-preview {\r\n    width: 400px; /* 固定寬度為 400px */\r\n    height: calc(400px * 0.75); /* 高度為寬度的 75% (4:3 比例) */\r\n    object-fit: contain; /* 確保圖片完整呈現 */\r\n    border-radius: 8px; /* 圓角效果（視需要調整） */\r\n    border: 1px solid #dcdcdc; /* 添加邊框讓預覽更清晰 */\r\n  }\r\n    \r\n  .uploader-interface {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  \r\n  .uploader-interface p {\r\n    margin: 4px 0;\r\n  }\r\n  \r\n  .error-message {\r\n    color: #f44336;\r\n  }\r\n  </style>\r\n  ","<template>\r\n  <v-container class=\"chat-container\">\r\n    <v-dialog v-model=\"detectError\" width=\"200\">\r\n      <v-alert dense type=\"error\"> Error </v-alert>\r\n    </v-dialog>\r\n\r\n    <div class=\"px-0 mr-n3\">\r\n      <ProgressLoader :key='activeKey' :showText=\"`LOADING...`\" :active=\"activeProgress\"></ProgressLoader>\r\n      \r\n      <div ref=\"chatWindow\" class=\"chat-window pt-1 pb-4\">\r\n        <infinite-loading direction=\"top\" @infinite=\"infiniteHandler\" :identifier='infiniteId'>\r\n          <div slot=\"no-more\">No more comments</div>\r\n          <div slot=\"no-results\">No more comments</div>\r\n        </infinite-loading>\r\n        \r\n        <!-- v-for=\"(msg, index) in messages.slice().reverse()\" -->\r\n        <chat-message\r\n          v-for=\"(msg, index) in messages\"\r\n          :key=\"index\"\r\n          :is_carer_user=\"msg.is_carer_user\"\r\n          :content_type=\"msg.content_type\"\r\n          :user_name=\"msg.user_name\"\r\n          :content=\"msg.content\"\r\n          :media_url=\"msg.media_url\"\r\n          :isFirstDate=\"msg.isFirstDate\"\r\n          @image-click=\"openImagePopup(`${IMG_PATH}media/${msg.media_url}`)\" \r\n          @image-click2=\"openImagePopup(msg.media_url)\"\r\n        ></chat-message>\r\n        <!-- image-click2解決測試時路徑用 -->\r\n      </div>\r\n    </div>\r\n    <div>\r\n      <div class=\"send-message-layout d-none d-md-flex\">\r\n        <v-text-field\r\n          v-model=\"newMessage\"\r\n          placeholder=\"Type your message here\"\r\n          outlined\r\n          hint=\"Shift + Enter for a new line, Enter to send: \"\r\n          persistent-hint\r\n          @keyup.enter=\"sendMessage\"\r\n          class=\"message-input mb-13 mx-3\"\r\n        >\r\n        </v-text-field>\r\n        <div class=\"action-buttons\">\r\n          <button @click=\"sendMessage\" elevation=\"0\" color=\"white\" class=\"send-btn px-1 mr-1\" >\r\n            <v-icon color=\"main-green\">mdi-send</v-icon>\r\n          </button>\r\n          <v-btn \r\n            @click=\"openUploadImage\" \r\n            elevation=\"0\" \r\n            color=\"primary\" \r\n            class=\"upload-btn main-green\"\r\n            :class=\"{'upload-btn--mobile': $vuetify.breakpoint.xs}\"\r\n          >\r\n            <v-icon>mdi-paperclip</v-icon>\r\n            <span class=\"d-none d-sm-inline\">Upload</span>\r\n          </v-btn>\r\n        </div>\r\n      </div>\r\n      \r\n    </div>\r\n\r\n    <!-- 圖片彈窗 -->\r\n    <!-- <v-dialog v-model=\"imagePopupVisible\" max-width=\"none\" persistent>\r\n      <v-card class=\"image-popup\">\r\n        <v-btn icon @click=\"closeImagePopup\" class=\"close-btn\">\r\n          <v-icon>mdi-close</v-icon>\r\n        </v-btn>\r\n        <v-img :src=\"selectedImage\" class=\"popup-img\"></v-img>\r\n      </v-card>\r\n    </v-dialog> -->\r\n    <ImagePopup\r\n      :key=\"`imgpop-${popImgKey}`\"\r\n      :image=\"selectedImage\"\r\n      :visible=\"imagePopupVisible\"\r\n      @close=\"closeImagePopup\">\r\n    </ImagePopup>\r\n\r\n    <UploadImage \r\n      :key=\"`imgupload-${uploadImgKey}`\"\r\n      :activeUpload=\"uploadImage\"\r\n      @close=\"closeUploadImage\"\r\n      @update:visible=\"updateVisible\"\r\n      @message-uploaded=\"handleMessageUploaded\">\r\n    </UploadImage>\r\n\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport ChatMessage from './ChatMessage.vue';\r\nimport ProgressLoader from '../common/progessLoading.vue';\r\nimport ImagePopup from './ImagePopup.vue';\r\nimport UploadImage from './UploadImage.vue';\r\nexport default {\r\n  name: 'ChatWindows',\r\n  components: {\r\n    ImagePopup,\r\n    ChatMessage,\r\n    ProgressLoader,\r\n    UploadImage\r\n  },\r\n  data() {\r\n    return {\r\n      newMessage: '',\r\n      selectedImage: '',\r\n      messages: [],\r\n      \r\n      user_name: '',  // 儲存使用者名稱\r\n      user_id: null,\r\n      \r\n      preloader: true,\r\n      imagePopupVisible: false,\r\n      activeProgress: false,\r\n      detectError: false,\r\n      uploadImage: false,\r\n      \r\n      page: 1,\r\n      size: 16,\r\n      popImgKey: 1,\r\n      uploadImgKey: 1,\r\n      activeKey: 1,\r\n      infiniteId: 1,\r\n    };\r\n  },\r\n  created() {\r\n    this.activeProgress = true;\r\n    // setTimeout(() => {\r\n    this.$route.params.id ? this.fetchMessages() : this.routerRedirectTo404();\r\n    // }, 500);\r\n    // if (this.$route.query.code && this.$route.query.state) {\r\n\r\n    //   axios.post('http://127.0.0.1:8000/api/member/line_login', {\r\n    //       code: this.$route.query.code,\r\n    //       state: this.$route.query.state,  // 自己發送的訊息\r\n    //     })\r\n    //     .then((res) => {\r\n    //       localStorage.setItem('mackay', JSON.stringify(res.data.jwt_token));\r\n    //       console.log('LINE LOGIN Success:');\r\n    //     })\r\n    //     .catch((err) => {\r\n    //       console.error('LINE LOGIN Failed:', err);\r\n    //     });\r\n    // }\r\n  },\r\n\r\n  mounted() {\r\n    document.body.classList.add('disable-scroller');\r\n    document.documentElement.style.overflow = 'hidden';\r\n  },\r\n\r\n  destroyed() {\r\n    document.body.classList.remove('disable-scroller');\r\n    document.documentElement.style.overflow = 'unset';\r\n  },\r\n\r\n  // mounted() {\r\n    // 頁面初次加載時滾動到底部\r\n    // this.$nextTick(() => {\r\n    //   const chatWindow = this.$refs.chatWindow;\r\n    //   if (chatWindow) {\r\n    //     chatWindow.scrollTop = chatWindow.scrollHeight;\r\n    //   }\r\n    // });\r\n  // },\r\n  // watch: {\r\n    // messages() {\r\n    //   // 當 messages 更新時，滾動到底部\r\n    //   this.$nextTick(() => {\r\n    //     const chatWindow = this.$refs.chatWindow;\r\n    //     if (chatWindow) {\r\n    //       chatWindow.scrollTop = chatWindow.scrollHeight;\r\n    //     }\r\n    //   });\r\n    // }\r\n  // },\r\n  methods: {\r\n    // 獲取訊息列表\r\n    fetchMessages() {\r\n      let userId\r\n      let fetch_user_id\r\n      let fetch_chatRoom\r\n      const getJWTData = JSON.parse(localStorage.getItem('mackay'));\r\n      if (this.userProfile.super_user){\r\n         fetch_user_id = this.storeUserId\r\n        //  fetch_chatRoom = this.storeChatRoom\r\n         if (getJWTData.room_path) {\r\n            fetch_chatRoom = getJWTData.room_path;\r\n          }else {\r\n            fetch_chatRoom = this.storeChatRoom;\r\n          }\r\n      }else {\r\n         fetch_user_id = this.userProfile.id\r\n         fetch_chatRoom = this.userProfile.room_path\r\n      }\r\n      if (fetch_user_id) {\r\n        userId = fetch_user_id\r\n      }else {\r\n        userId = getJWTData.selectedId\r\n      }\r\n      console.log('fetchMessages', this.userProfile.id, this.storeUserId);\r\n      // if (this.userProfile.id !== this.$route.params.id) {\r\n      //   alert('Wrong User');\r\n      //   this.routerRedirectTo404();\r\n      //   return;\r\n      // }\r\n      const chatRoomId = this.$route.params.id.split('-')[0];\r\n      \r\n      if (!this.userProfile.super_user) {\r\n            if (userId != chatRoomId) {\r\n              // alert('Wrong User');\r\n              // alert(userId, chatRoomId);\r\n              this.routerRedirectTo404();\r\n              return;\r\n            \r\n          }\r\n        }else {\r\n          const getJWTData = JSON.parse(localStorage.getItem('mackay'));\r\n          const selectedIdForCheck = getJWTData.selectedId;\r\n          if (selectedIdForCheck != chatRoomId) {\r\n            // alert('Wrong User');\r\n            this.$router.push('/chat')\r\n            return;\r\n          }\r\n        }\r\n\r\n      console.log('fetchMessages 1', userId)\r\n      // axios.get('http://127.0.0.1:8000/api/chat/list?user_id=1&page=' + this.page + '&size=15')\r\n      axios.get(`${this.SERVER_PATH}api/chat/list?`,{\r\n        params: {\r\n          user_id: this.userProfile.id,\r\n          chatRoom: fetch_chatRoom,\r\n          page: this.page,\r\n          size: this.size,\r\n        }\r\n      })\r\n        .then((res) => {\r\n          if (!res.data.count) {\r\n            this.user_name = '';\r\n          } else {\r\n            this.user_name = res.data.results[0].user_name;\r\n            // localStorage.setItem('user_name', this.user_name);\r\n          }\r\n\r\n          console.log(JSON.stringify(res.data));\r\n          this.preloader = false;\r\n          // console.log('fetchMessages 2', this.page);\r\n          this.messages = res.data.results;\r\n          console.table('fetchMessages 3', this.messages);\r\n          // this.user_name = res.data.results[0].user_name;\r\n          // localStorage.setItem('user_name', this.user_name);\r\n          this.page += 1;\r\n          this.infiniteId += 1;\r\n\r\n          if (!res.data.count) {\r\n            this.user_name = '';\r\n          } else {\r\n            this.user_name = res.data.results[0].user_name;\r\n            // localStorage.setItem('user_name', this.user_name);\r\n          }\r\n\r\n          // 頁面初次加載時滾動到底部\r\n          setTimeout(() => {\r\n            this.$nextTick(() => {\r\n              this.activeProgress = false;\r\n              this.activeKey += 1;\r\n              const chatWindow = this.$refs.chatWindow;\r\n              if (chatWindow) {\r\n                chatWindow.scrollTop = chatWindow.scrollHeight;\r\n              }\r\n            });\r\n          },1000)\r\n          \r\n        })\r\n        .catch((err) => {\r\n          this.detectError = true;\r\n          // setTimeout(() => {\r\n          //   this.$router.push({ name: 'chat-list' });\r\n          // }, 500);\r\n          console.error(err.response.status);\r\n          if (err.response.status === 404) {\r\n            this.routerRedirectTo404();\r\n          } else if (err.response.status === 403) {\r\n            this.routerRedirectTo404();\r\n          }else{\r\n            if (this.userProfile.super_user){\r\n              this.$router.push({ name: 'chat-list' });\r\n            }else {\r\n              this.routerRedirectTo404();\r\n            }\r\n          }\r\n          // if (err.response.status === 404) {\r\n          //   xxx\r\n          // } else if (err.response.status === 403) {\r\n          //   xxx\r\n          // }\r\n        });\r\n    },\r\n\r\n    infiniteHandler($state) {\r\n      // let userId\r\n      // let fetch_user_id\r\n      let fetch_chatRoom\r\n      const getJWTData = JSON.parse(localStorage.getItem('mackay'));\r\n      if (this.userProfile.super_user){\r\n        //  fetch_user_id = this.storeUserId\r\n         if (getJWTData.room_path) {\r\n            fetch_chatRoom = getJWTData.room_path;\r\n          }else {\r\n            fetch_chatRoom = this.storeChatRoom;\r\n          }\r\n      }else {\r\n        //  fetch_user_id = this.userProfile.id\r\n         fetch_chatRoom = this.userProfile.room_path\r\n      }\r\n      // if (fetch_user_id) {\r\n      //   userId = fetch_user_id\r\n      // }else {\r\n      //   userId = getJWTData.selectedId\r\n      // }\r\n      if (!this.preloader) {\r\n        axios.get(`${this.SERVER_PATH}api/chat/list?`, {\r\n          params: {\r\n            user_id: this.userProfile.id,\r\n            chatRoom: fetch_chatRoom,\r\n            page: this.page,\r\n            size: this.size,\r\n          },\r\n        }).then(( res ) => {\r\n          // console.log(JSON.stringify(res.data.results));\r\n          // console.log(res.data.count);\r\n          if (!res.data.results.length || res.data.count <= this.size) {\r\n            $state.complete();\r\n          } else {\r\n            console.log('infiniteHandler', this.page);\r\n            this.messages.push(...res.data.results);\r\n\r\n            this.page += 1;\r\n            $state.loaded();\r\n          }\r\n          // if (res.data.count) {\r\n          //   this.page += 1;\r\n          //   this.messages.unshift(res.data.results.slice());\r\n          //   $state.loaded();\r\n          // } else {\r\n          //   $state.complete();\r\n          // }\r\n        });\r\n      }\r\n      \r\n    },\r\n    // 發送訊息並用 axios 將資料 POST 到資料庫\r\n    sendMessage() {\r\n      // let userId\r\n      // let fetch_user_id\r\n      let fetch_chatRoom\r\n      const getJWTData = JSON.parse(localStorage.getItem('mackay'));\r\n      if (this.userProfile.super_user){\r\n        //  fetch_user_id = this.storeUserId\r\n         if (getJWTData.room_path) {\r\n            fetch_chatRoom = getJWTData.room_path;\r\n          }else {\r\n            fetch_chatRoom = this.storeChatRoom;\r\n          }\r\n      }else {\r\n        //  fetch_user_id = this.userProfile.id\r\n         fetch_chatRoom = this.userProfile.room_path\r\n      }\r\n      // if (fetch_user_id) {\r\n      //   userId = fetch_user_id\r\n      // }else {\r\n      //   userId = getJWTData.selectedId\r\n      // }\r\n      if (this.newMessage.trim() !== '') {\r\n        const user_name = this.userProfile.name || '您';\r\n        const isCarerUser = this.userProfile.super_user === true;\r\n\r\n        const messageData = {\r\n          is_carer_user: isCarerUser,\r\n          user_name: user_name,\r\n          media_url: '',\r\n          content: this.newMessage,\r\n          content_type: 'text',\r\n          isFirstDate: ''\r\n        };\r\n\r\n        // 發送到前端 UI\r\n        this.messages.push(messageData);\r\n        this.newMessage = '';\r\n        // 發送滾動到底部\r\n        this.$nextTick(() => {\r\n          const chatWindow = this.$refs.chatWindow;\r\n          if (chatWindow) {\r\n            chatWindow.scrollTop = chatWindow.scrollHeight;\r\n          }\r\n        });\r\n\r\n        // 發送 POST 請求到後端\r\n        axios.post(`${this.SERVER_PATH}api/chat/control`, {\r\n          user_id: this.userProfile.id,\r\n          chatRoom: fetch_chatRoom,\r\n          is_carer_user: isCarerUser,  // 根據 super_user 設置\r\n          content: messageData.content,\r\n          content_type: 'text'\r\n        })\r\n        .then((response) => {\r\n          console.log('Message sent successfully:', response.data);\r\n        })\r\n        .catch((err) => {\r\n          console.error('Error sending message:', err);\r\n        });\r\n      }\r\n    },\r\n    // 開啟圖片彈窗\r\n    openImagePopup(imageUrl) {\r\n      this.selectedImage = imageUrl;\r\n      this.imagePopupVisible = true;\r\n      this.popImgKey += 1\r\n      console.log('openImagePopup', this.imagePopupVisible)\r\n    },\r\n    // 關閉圖片彈窗\r\n    closeImagePopup(value) {\r\n      this.imagePopupVisible = value;\r\n      this.selectedImage = '';\r\n      this.popImgKey += 1\r\n    },\r\n    updateVisible(val) {\r\n      this.imagePopupVisible = val\r\n    },\r\n    openUploadImage() {\r\n      this.uploadImage = true;\r\n      this.uploadImgKey += 1\r\n    },\r\n    closeUploadImage() {\r\n      this.uploadImage = false;\r\n    },\r\n    handleMessageUploaded(messageData) {\r\n      console.log('Message uploaded:', messageData);\r\n      // 在這裡更新 this.messages 陣列\r\n      this.messages.push(messageData);\r\n    },\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.chat-container {\r\n  height: calc(100dvh - 160px);\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n  padding: 0;\r\n}\r\n\r\n.chat-window {\r\n  flex: 1;\r\n  background-color: #fff;\r\n  padding: 0;\r\n  /* height: calc(100vh - 205px); */\r\n  overflow-y: auto;\r\n  position: relative;\r\n}\r\n\r\n.send-message-layout {\r\n  padding-top: 2px;\r\n  padding-right: 12px;\r\n  display: flex;\r\n  align-items: flex-start;\r\n}\r\n\r\n.message-input {\r\n  border-top: 1px solid #eee;\r\n}\r\n\r\n.image-popup {\r\n  background-color: rgba(0, 0, 0, 0.8); \r\n  width: calc(9/12 * 100vw); \r\n  height: 100vh;\r\n  position: relative;\r\n}\r\n\r\n.popup-img {\r\n  width: 100%;\r\n  height: auto;\r\n}\r\n.layout {\r\n  align-items: baseline;\r\n}\r\n.close-btn {\r\n  position: absolute;\r\n  top: 10px;\r\n  right: 10px;\r\n  color: white;\r\n  z-index: 101;\r\n}\r\n.v-btn.send-btn:hover{\r\n  background-color: #fff !important;\r\n}\r\n.v-dialog__content {\r\n  z-index: 100;\r\n}\r\n.infinite-loading-container{\r\n  font-size: 12px;\r\n  color: #ccc;\r\n  margin-top: 15px;\r\n  margin-bottom: 15px;\r\n}\r\n.upload-btn {\r\n  height: 40px;\r\n}\r\n\r\n.upload-btn--mobile {\r\n  min-width: 40px !important;\r\n  width: 40px;\r\n  height: 40px !important;\r\n  padding: 0 !important;\r\n  margin-top: 8px;\r\n}\r\n.action-buttons {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-top: 8px;\r\n}\r\n@media all and (min-width: 962px) {\r\n  .chat-window {\r\n    height: calc(100vh - 205px);\r\n  }\r\n}\r\n@media (max-width: 961px) {\r\n  .chat-window {\r\n    height: calc(100vh - 160px);\r\n  }\r\n}\r\n@media (max-width: 428px) {\r\n  .message-input {\r\n    margin-bottom: 8px !important;\r\n  }\r\n  /* .chat-container{\r\n    height: calc(100vh - 36px);\r\n  } */\r\n}\r\n\r\n</style>","<template>\r\n  <v-bottom-sheet\r\n    v-model=\"localVisible\"\r\n    inset\r\n  >\r\n    <v-sheet class=\"message-layout\">\r\n      <!-- 頂部工具欄 -->\r\n      <v-toolbar dense color=\"main-green\" dark>\r\n        <v-spacer></v-spacer>\r\n        <v-toolbar-title class=\"text-center mx-auto\">New Message</v-toolbar-title>\r\n        <v-spacer></v-spacer>\r\n        <v-btn icon dark @click=\"close\" class=\"ml-n6\">\r\n          <v-icon>mdi-close</v-icon>\r\n        </v-btn>\r\n      </v-toolbar>\r\n\r\n      <!-- 訊息輸入區域 -->\r\n      <v-card-text class=\"message-input-area\">\r\n        <v-textarea\r\n          v-model=\"newMessage\"\r\n          outlined\r\n          color=\"main-green\"\r\n          auto-grow\r\n          rows=\"4\"\r\n          row-height=\"30\"\r\n          placeholder=\"Type your message here\"\r\n          hide-details\r\n          class=\"message-textarea\"\r\n        ></v-textarea>\r\n\r\n        <!-- 按鈕區域 -->\r\n        <div class=\"action-buttons-grid\">\r\n          <!-- 左側：附件按鈕 -->\r\n          <div class=\"grid-item\">\r\n            <v-btn\r\n              color=\"main-green\"\r\n              text\r\n              class=\"action-btn\"\r\n              @click=\"openUploadImage\"\r\n            >\r\n              <div class=\"d-flex\">\r\n                <v-icon class=\"mb-1\">mdi-paperclip</v-icon>\r\n                <span class=\"caption\">Upload</span>\r\n              </div>\r\n            </v-btn>\r\n          </div>\r\n\r\n          <!-- 右側：發送按鈕 -->\r\n          <div class=\"grid-item text-right\">\r\n            <v-btn\r\n              color=\"main-green\"\r\n              text\r\n              class=\"action-btn\"\r\n              @click=\"sendMessage\"\r\n              :disabled=\"!newMessage.trim()\"\r\n            >\r\n              <div class=\"d-flex\">\r\n                <v-icon class=\"mb-1\">mdi-send</v-icon>\r\n                <span class=\"caption\">Send</span>\r\n              </div>\r\n            </v-btn>\r\n          </div>\r\n        </div>\r\n      </v-card-text>\r\n    </v-sheet>\r\n\r\n    <!-- 圖片上傳組件 -->\r\n    <UploadImage \r\n      :key=\"`imgupload-${uploadImgKey}`\"\r\n      :activeUpload=\"uploadImage\"\r\n      @close=\"closeUploadImage\"\r\n      @update:visible=\"updateVisible\"\r\n      @message-uploaded=\"handleMessageUploaded\"\r\n    ></UploadImage>\r\n  </v-bottom-sheet>\r\n</template>\r\n\r\n<script>\r\nimport UploadImage from './UploadImage.vue';\r\n\r\nexport default {\r\n  name: 'MsgLayout',\r\n  \r\n  components: {\r\n    UploadImage\r\n  },\r\n\r\n  props: {\r\n    visible: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      newMessage: '',\r\n      uploadImage: false,\r\n      uploadImgKey: 1,\r\n      localVisible: false\r\n    };\r\n  },\r\n\r\n  watch: {\r\n    visible(val) {\r\n      this.localVisible = val;\r\n      if (!val) {\r\n        this.newMessage = '';\r\n      }\r\n    },\r\n    localVisible(val) {\r\n      this.$emit('update:visible', val);\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    close() {\r\n      this.localVisible = false;\r\n      this.newMessage = '';\r\n    },\r\n\r\n    sendMessage() {\r\n      if (this.newMessage.trim()) {\r\n        this.$emit('send-message', this.newMessage);\r\n        this.newMessage = '';\r\n        this.close();\r\n      }\r\n    },\r\n\r\n    openUploadImage() {\r\n      this.uploadImage = true;\r\n      this.uploadImgKey += 1;\r\n    },\r\n\r\n    closeUploadImage() {\r\n      this.uploadImage = false;\r\n    },\r\n\r\n    updateVisible(val) {\r\n      this.uploadImage = val;\r\n    },\r\n\r\n    handleMessageUploaded(messageData) {\r\n      this.$emit('message-uploaded', messageData);\r\n      this.close();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.v-toolbar__title{\r\n  font-size: 1rem;\r\n}\r\n.message-layout {\r\n  padding-bottom: 16px;\r\n  border-top-left-radius: 16px;\r\n  border-top-right-radius: 16px;\r\n}\r\n\r\n.message-input-area {\r\n  width: 100%;\r\n  max-width: 600px;\r\n  margin: 0 auto;\r\n  padding: 16px;\r\n}\r\n\r\n.message-textarea {\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.action-buttons-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr; /* 兩列等寬 */\r\n  gap: 8px;\r\n  padding: 0 8px;\r\n  max-width: 600px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.grid-item {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.grid-item:last-child {\r\n  justify-content: flex-end;\r\n}\r\n\r\n.action-btn {\r\n  min-width: 64px;\r\n  height: auto;\r\n  padding: 8px 0;\r\n}\r\n\r\n.action-btn .v-icon {\r\n  font-size: 24px;\r\n}\r\n\r\n.action-btn .caption {\r\n  font-size: 12px;\r\n  line-height: 1.35;\r\n  margin-top: 4px;\r\n}\r\n\r\n.action-btn.v-btn--disabled {\r\n  opacity: 0.6;\r\n}\r\n\r\n/* .toolbar-title {\r\n  position: absolute;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  font-size: 1rem;\r\n}\r\n\r\n.close-btn {\r\n  position: absolute;\r\n  right: 0;\r\n} */\r\n</style>\r\n","@import './_variables.scss'\n\n// Transition\n.bottom-sheet-transition\n  &-enter\n    transform: translateY(100%)\n\n  &-leave-to\n    transform: translateY(100%)\n\n// Block\n.v-bottom-sheet.v-dialog\n  align-self: flex-end\n  border-radius: 0\n  flex: 0 1 auto\n  margin: 0\n  overflow: visible\n\n  &.v-bottom-sheet--inset\n    max-width: $bottom-sheet-inset-width\n\n    @media #{map-get($display-breakpoints, 'xs-only')}\n      max-width: none\n","@import '../../styles/styles.sass';\n\n$bottom-sheet-inset-width: 70% !default;\n","@import './_variables.scss'\n\n+theme(v-textarea) using ($material)\n  &.v-text-field--solo-inverted\n    &.v-input--is-focused\n      textarea\n        color: map-deep-get($material, 'inputs', 'solo-inverted-focused-text')\n\n      textarea::placeholder\n        color: map-deep-get($material, 'inputs', 'solo-inverted-focused-placeholder')\n\n.v-textarea\n  textarea\n    align-self: stretch\n    flex: 1 1 auto\n    line-height: $textarea-line-height\n    max-width: 100%\n    min-height: $textarea-min-height\n    outline: none\n    padding: $textarea-padding\n    width: 100%\n\n  .v-text-field__prefix,\n  .v-text-field__suffix\n    padding-top: $textarea-prefix-padding-top\n    align-self: start\n\n  &.v-text-field--box,\n  &.v-text-field--enclosed\n    .v-text-field__prefix,\n    textarea\n      margin-top: $textarea-box-enclosed-prefix-margin-top\n\n    &.v-text-field--single-line,\n    &.v-text-field--outlined\n      &:not(.v-input--dense)\n        .v-text-field__prefix,\n        .v-text-field__suffix,\n        textarea\n          margin-top: $textarea-box-enclosed-single-outlined-margin-top\n\n        .v-label\n          top: $textarea-box-enclosed-single-outlined-label-top\n\n      &.v-input--dense\n        .v-text-field__prefix,\n        .v-text-field__suffix,\n        textarea\n          margin-top: $textarea-dense-box-enclosed-single-outlined-margin-top\n\n        .v-input__prepend-inner,\n        .v-input__prepend-outer,\n        .v-input__append-inner,\n        .v-input__append-outer\n          align-self: flex-start\n          margin-top: $textarea-dense-append-prepend-margin-top\n\n  &.v-text-field--solo\n    align-items: flex-start\n\n    .v-input__control\n      textarea\n        caret-color: auto\n\n    // Essentially revert styles\n    // applied by v-text-field\n    .v-input__prepend-inner,\n    .v-input__prepend-outer,\n    .v-input__append-inner,\n    .v-input__append-outer\n      align-self: flex-start\n      margin-top: $textarea-solo-append-prepend-margin-top\n\n    .v-input__append-inner\n      +ltr()\n        padding-left: $textarea-solo-append-padding\n\n      +rtl()\n        padding-right: $textarea-solo-append-padding\n\n  &--auto-grow\n    textarea\n      overflow: hidden\n\n  &--no-resize\n    textarea\n      resize: none\n\n  &.v-text-field--enclosed\n    .v-text-field__slot\n      align-self: stretch\n\n      +ltr()\n        margin-right: $textarea-enclosed-text-slot-margin\n\n      +rtl()\n        margin-left: $textarea-enclosed-text-slot-margin\n\n      textarea\n        +ltr()\n          padding-right: $textarea-enclosed-text-slot-padding\n\n        +rtl()\n          padding-left: $textarea-enclosed-text-slot-padding\n\n    &.v-text-field--reverse\n      .v-text-field__slot\n        .v-label\n          +ltr()\n            margin-right: -$textarea-enclosed-text-slot-margin\n\n          +rtl()\n            margin-left: -$textarea-enclosed-text-slot-margin\n","@import '../../styles/styles.sass';\n\n$textarea-box-enclosed-prefix-margin-top: 24px !default;\n$textarea-box-enclosed-single-outlined-label-top: 18px !default;\n$textarea-box-enclosed-single-outlined-margin-top: 10px !default;\n$textarea-dense-box-enclosed-single-outlined-margin-top: 6px !default;\n$textarea-dense-append-prepend-margin-top: 8px !default;\n$textarea-enclosed-text-slot-margin: -12px !default;\n$textarea-enclosed-text-slot-padding: 12px !default;\n$textarea-line-height: 1.75rem !default;\n$textarea-min-height: 32px !default;\n$textarea-padding: 0 !default;\n$textarea-prefix-padding-top: 2px !default;\n$textarea-solo-append-padding: 12px !default;\n$textarea-solo-append-prepend-margin-top: 12px !default;\n","@mixin rtl()\n  .v-application--is-rtl &\n    @content\n\n@mixin ltr()\n  .v-application--is-ltr &\n    @content\n","\r\n$topbarHeight: '38px';\r\n\r\n.v-app-bar .dropdown-btn {\r\n  padding: 0 10px;\r\n}\r\n.v-menu__content{\r\n  z-index: 109 !important;\r\n}\r\n.v-toolbar__content {\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n.main-logo{\r\n  height: 100%;\r\n  padding: 10px 0px;\r\n}\r\n.fill-height {\r\n  height: calc(100vh - 48px);\r\n  padding: unset;\r\n}\r\n.container.fill-height > .row{\r\n  height: 100%;\r\n}\r\n\r\n.chat-section {\r\n  border-right: 1px solid #ccc;\r\n  height: 100%;\r\n  overflow: hidden;\r\n  position: relative;\r\n  z-index: 100;\r\n}\r\n.chat-section header {\r\n  z-index: 104;\r\n}\r\n\r\n\r\n.product-section {\r\n  padding: 0;\r\n  height: 100%;\r\n}\r\n\r\n.chat-title {\r\n  padding-left: 10px;\r\n  color: black;\r\n}\r\n\r\n.dropdown-btn {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.search-results-list {\r\n  max-height: 200px;\r\n  overflow-y: auto;\r\n  background-color: white;\r\n  border: 1px solid #e0e0e0;\r\n  position: absolute;\r\n  top: 47px;;\r\n  z-index: 1003;\r\n  width: 97%;\r\n  border-radius: 4px;\r\n  box-shadow: 0 0 0 5px #555;\r\n}\r\n.logoutBtn{\r\n  cursor: pointer;\r\n  text-align: center;\r\n}\r\n\r\n\r\n/* width */\r\n::-webkit-scrollbar {\r\n  width: 5px;\r\n}\r\n\r\n/* Track */\r\n::-webkit-scrollbar-track {\r\n  background: #f1f1f1; \r\n}\r\n \r\n/* Handle */\r\n::-webkit-scrollbar-thumb {\r\n  background: #888; \r\n}\r\n\r\n/* Handle on hover */\r\n::-webkit-scrollbar-thumb:hover {\r\n  background: #555; \r\n}\r\n\r\n\r\n.photo-section {\r\n  transition: transform 0.3s ease;\r\n  flex: 0 0 33.33333%;\r\n  max-width: 33.33333%;\r\n}\r\n\r\n.photo-section--mobile {\r\n  position: fixed;\r\n  top: #{$topbarHeight};\r\n  right: 0;\r\n  bottom: 0;\r\n  z-index: 200;\r\n  background: white;\r\n  transform: translateX(100%);\r\n  height: calc(100vh - #{$topbarHeight});\r\n  width: 100%;\r\n  flex: 0 0 100%;\r\n  max-width: 100%;\r\n}\r\n\r\n.photo-section--open {\r\n  transform: translateX(0);\r\n}\r\n\r\n@media (max-width: 730px) {\r\n  .fill-height {\r\n    height: calc(100vh - #{$topbarHeight});\r\n    padding: unset;\r\n  }\r\n  .chat-section {\r\n    flex: 0 0 100%;\r\n    max-width: 100%;\r\n    padding-bottom: 60px; /* 為底部按鈕區留出空間 */\r\n  }\r\n\r\n  .mobile-action-btn {\r\n    height: 48px !important;\r\n  }\r\n  \r\n  .photo-section {\r\n    flex: 0 0 100%;\r\n    max-width: 100%;\r\n  }\r\n  \r\n  .photo-section--mobile {\r\n    height: calc(100vh - 99px); /* #{$topbarHeight} (topbar) + 60px (bottom actions) */\r\n  }\r\n\r\n  // .v-app-bar {\r\n  //   height: #{$topbarHeight} !important;\r\n  //   .v-toolbar__content, .v-toolbar__extension {\r\n  //     height: #{$topbarHeight} !important;\r\n  //   }\r\n  //   .main-logo {\r\n  //     width: 100px;\r\n  //     height: 21px;\r\n  //     padding: 0 !important;\r\n  //   }\r\n  // }\r\n}\r\n\r\n/* 確保 row 有正確的 flex 佈局 */\r\n.container.fill-height > .row {\r\n  height: 100%;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n}\r\n.searchChatToolBar:deep  .v-toolbar__content{\r\n  padding: 4px 8px !important;\r\n}\r\n.mobile-actions {\r\n  position: fixed;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  background: white;\r\n  border-top: 1px solid rgba(0, 0, 0, 0.05);\r\n  z-index: 1000;\r\n  transition: transform 0.3s ease; /* 添加過渡效果 */\r\n}\r\n\r\n.mobile-actions--hidden {\r\n  transform: translateY(100%); /* 向下移動隱藏 */\r\n}\r\n\r\n.mobile-actions-container {\r\n  display: flex;\r\n  justify-content: space-around;\r\n  padding: 12px 0 19px;\r\n  max-width: 600px;\r\n  margin: 0 auto;\r\n  position: relative;\r\n}\r\n\r\n.mobile-action-btn {\r\n  flex: 1;\r\n  height: auto;\r\n  min-width: auto;\r\n  padding: 8px 0;\r\n  border-radius: 0;\r\n}\r\n\r\n.action-icon {\r\n  font-size: 20px;\r\n  margin-bottom: 4px;\r\n  color: #757575; /* 未選中的顏色 */\r\n  transition: color 0.3s ease;\r\n}\r\n\r\n.action-text {\r\n  font-size: 10px;\r\n  line-height: 1;\r\n  color: #757575; /* 未選中的顏色 */\r\n  transition: color 0.3s ease;\r\n}\r\n\r\n/* 選中和懸停狀態使用 #2d9ca0 顏色 */\r\n.mobile-action-btn.active .action-icon,\r\n.mobile-action-btn.active .action-text,\r\n.mobile-action-btn:hover .action-icon,\r\n.mobile-action-btn:hover .action-text {\r\n  color: #2d9ca0 !important;\r\n}\r\n\r\n/* 為底部導航添加微妙的陰影 */\r\n.mobile-actions {\r\n  box-shadow: 0 -1px 3px rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n/* 確保 MsgLayout 的 z-index 高於其他元素 */\r\n.v-dialog {\r\n  z-index: 1100 !important;\r\n}\r\n\r\n.user-name {\r\n  color: rgba(0, 0, 0, 0.87);\r\n  font-size: 14px;\r\n  padding: 8px 16px;\r\n}\r\n"],"names":[],"sourceRoot":""}